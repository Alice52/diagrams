<svg host="65bd71144e"
  xmlns="http://www.w3.org/2000/svg"
  xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="531px" height="719px" viewBox="-0.5 -0.5 531 719" content="&lt;mxfile&gt;&lt;diagram id=&quot;85F-CuCrV3Gl5GQF5gHI&quot; name=&quot;Page-1&quot;&gt;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&lt;/diagram&gt;&lt;/mxfile&gt;" style="background-color: rgb(255, 255, 255);">
  <defs/>
  <g>
    <path d="M 140 100 L 218.63 100" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 223.88 100 L 216.88 103.5 L 218.63 100 L 216.88 96.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <rect x="420" y="0" width="110" height="40" rx="3.6" ry="3.6" fill="#ffffff" stroke="#000000" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 108px; height: 1px; padding-top: 20px; margin-left: 421px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                                服务器
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="475" y="24" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    服务器
        </text>
      </switch>
    </g>
    <path d="M 335 100 L 367.5 100 Q 377.5 100 377.5 90 L 377.5 30 Q 377.5 20 387.5 20 L 413.63 20" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 418.88 20 L 411.88 23.5 L 413.63 20 L 411.88 16.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <rect x="225" y="52.5" width="110" height="95" rx="8.55" ry="8.55" fill="#ffffff" stroke="#000000" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 108px; height: 1px; padding-top: 100px; margin-left: 226px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                                LVS
                <br/>
                                负载均衡服务器
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="280" y="104" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    LVS...
        </text>
      </switch>
    </g>
    <rect x="0" y="70" width="130" height="40" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 128px; height: 1px; padding-top: 90px; margin-left: 1px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                                client
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="65" y="94" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    client
        </text>
      </switch>
    </g>
    <rect x="10" y="80" width="130" height="40" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 128px; height: 1px; padding-top: 100px; margin-left: 11px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                                client
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="75" y="104" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    client
        </text>
      </switch>
    </g>
    <rect x="20" y="90" width="130" height="40" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 128px; height: 1px; padding-top: 110px; margin-left: 21px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                                client
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="85" y="114" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    client
        </text>
      </switch>
    </g>
    <rect x="420" y="140" width="110" height="40" rx="3.6" ry="3.6" fill="#ffffff" stroke="#000000" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 108px; height: 1px; padding-top: 160px; margin-left: 421px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                                服务器
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="475" y="164" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    服务器
        </text>
      </switch>
    </g>
    <path d="M 335 100 L 367.5 100 Q 377.5 100 377.5 110 L 377.5 150 Q 377.5 160 387.5 160 L 413.63 160" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 418.88 160 L 411.88 163.5 L 413.63 160 L 411.88 156.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 3 224 L 512 224 L 522 234 L 522 469 L 3 469 L 3 224 Z" fill="#fff2cc" stroke="#d6b656" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 512 224 L 512 234 L 522 234" fill="none" stroke="#d6b656" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 517px; height: 1px; padding-top: 347px; margin-left: 5px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: left; ">
              <div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: #666600; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                                1. 此时存在的问题
                <br/>
                                a. LVS 可能会挂
                <br/>
                                b. RS 可能会挂
                <br/>
                                2. 解决方案
                <br/>
                                a. 本质上就是单点故障问题:
                <font color="#ff0080">
                                    一变多
                </font>
                <br/>
                                - 多点的形式:
                <font color="#ff0080">
                                    主备
                </font>
                                / 主主
                <br/>
                                - 主备的方向性: 类比皇帝
                <br/>
                                - 主备的效率性: 选举时带条件
                <br/>
                                b. RS 挂了解决
                <br/>
                                - 怎么确定RS挂了: ping 是不对的(网络层), 但是应用在第七层(请求访问)
                <br/>
                                - 心跳
                <br/>
                                3. 主从 &amp;
                <font color="#ff0080">
                                    主备
                </font>
                <br/>
                                - 主从: 主和从一起协作完成, 这里的主一般会做主备(单点问题)
                <br/>
                                -
                <font color="#ff0080">
                                    主备
                </font>
                                : 主工作, 从在等待
                <font color="#ff0080">
                  <br/>
                </font>
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="5" y="351" fill="#666600" font-family="Helvetica" font-size="14px">
                    1. 此时存在的问题...
        </text>
      </switch>
    </g>
    <path d="M 3 521 L 514 521 L 524 531 L 524 717 L 3 717 L 3 521 Z" fill="#fff2cc" stroke="#d6b656" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 514 521 L 514 531 L 524 531" fill="none" stroke="#d6b656" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 519px; height: 1px; padding-top: 619px; margin-left: 5px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: left; ">
              <div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: #666600; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                                - keepalived 之间交互实现功能
                <br/>
                <br/>
                                keepalived 需要有的功能:
                <font color="#ff0080">
                                    解决单点故障(HA)
                </font>
                <br/>
                <br/>
                                1. 心跳检查RS的存活及相关的上线剔除等工作
                <br/>
                                2. 监控自己的服务
                <br/>
                                3. master 通告自己活着, backup 监听master
                <br/>
                                4. LVS 宕机之后的转移(改源码||第三方实现)
                <br/>
                                5. 配置 VIP, IPVS
                <br/>
                <br/>
                                kill -9 的问题, 需要zookeeper解决
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="5" y="623" fill="#666600" font-family="Helvetica" font-size="14px">
                    - keepalived 之间交互实现功能...
        </text>
      </switch>
    </g>
  </g>
  <switch>
    <g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/>
    <a transform="translate(0,-5)" xlink:href="https://www.diagrams.net/doc/faq/svg-export-text-problems" target="_blank">
      <text text-anchor="middle" font-size="10px" x="50%" y="100%">
                Viewer does not support full SVG 1.1
      </text>
    </a>
  </switch>
</svg>
