<svg host="65bd71144e"
  xmlns="http://www.w3.org/2000/svg"
  xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="1616px" height="982px" viewBox="-0.5 -0.5 1616 982" content="&lt;mxfile&gt;&lt;diagram id=&quot;YO1ck9ihwH4uuwzySjA1&quot; name=&quot;Page-1&quot;&gt;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&lt;/diagram&gt;&lt;/mxfile&gt;">
  <defs/>
  <g>
    <rect x="1095" y="610" width="520" height="315" rx="18.9" ry="18.9" fill="#d5e8d4" stroke="#82b366" pointer-events="none"/>
    <rect x="1477.5" y="630" width="115" height="33.75" rx="3.38" ry="3.38" fill="#f8cecc" stroke="#b85450" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 113px; height: 1px; padding-top: 647px; margin-left: 1479px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                                uid: 完全基于内存才有可能达到kw-op
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="1535" y="650" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    uid: 完全基于内存才有可能达到kw-op
        </text>
      </switch>
    </g>
    <path d="M 1235 705 L 1256.06 694.47 Q 1265 690 1273.94 694.47 L 1316.06 715.53 Q 1325 720 1316.06 724.47 L 1273.94 745.53 Q 1265 750 1256.06 745.53 L 1213.94 724.47 Q 1205 720 1213.94 715.53 Z" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 1265 630 L 1265 683.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 1265 688.88 L 1261.5 681.88 L 1265 683.63 L 1268.5 681.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 654px; margin-left: 1266px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">
                                req 负载
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="1266" y="657" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">
                    req 负载
        </text>
      </switch>
    </g>
    <path d="M 1160 770 L 1160 730 Q 1160 720 1170 720 L 1198.63 720" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 1203.88 720 L 1196.88 723.5 L 1198.63 720 L 1196.88 716.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 743px; margin-left: 1161px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">
                                异步
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="1161" y="746" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">
                    异步
        </text>
      </switch>
    </g>
    <rect x="1115" y="770" width="90" height="80" rx="4" ry="4" fill="#ffffff" stroke="#000000" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 88px; height: 1px; padding-top: 810px; margin-left: 1116px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                                填充token: 先根据业务服务个数确定限流阈值, 在根据限流服务个数分配参数
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="1160" y="814" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    填充token: 先根据业务服务个数确定限流阈值, 在根据限流服务个数分配参数
        </text>
      </switch>
    </g>
    <ellipse cx="1265" cy="805" rx="40" ry="15" fill="#ffffff" stroke="#000000" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 78px; height: 1px; padding-top: 805px; margin-left: 1226px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                                通过
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="1265" y="809" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    通过
        </text>
      </switch>
    </g>
    <path d="M 1265 750 L 1265 783.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 1265 788.88 L 1261.5 781.88 L 1265 783.63 L 1268.5 781.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 766px; margin-left: 1265px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">
                                有
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="1265" y="770" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">
                    有
        </text>
      </switch>
    </g>
    <ellipse cx="1410" cy="720" rx="25" ry="20" fill="#ffffff" stroke="#000000" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 48px; height: 1px; padding-top: 720px; margin-left: 1386px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                                拒绝
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="1410" y="724" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    拒绝
        </text>
      </switch>
    </g>
    <path d="M 1325 720 L 1378.63 720" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 1383.88 720 L 1376.88 723.5 L 1378.63 720 L 1376.88 716.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 720px; margin-left: 1354px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">
                                无
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="1354" y="724" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">
                    无
        </text>
      </switch>
    </g>
    <path d="M 1335 750 L 1584 750 L 1595 761 L 1595 870 L 1335 870 L 1335 750 Z" fill="#fff2cc" stroke="#d6b656" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 1584 750 L 1584 761 L 1595 761" fill="none" stroke="#d6b656" stroke-miterlimit="10" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 258px; height: 1px; padding-top: 810px; margin-left: 1337px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: left; ">
              <div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: #666600; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                <span style="font-size: 12px">
                                    1. kwqps的api单机是一定扛不住的
                  <br/>
                                    2. 让他水平扩展
                  <br/>
                                    - 异步填充就分量做
                  <br/>
                                    - req 通过lvs/nginx负载到限流服务
                  <br/>
                                    3. 如果量超大可以每个服务只处理一个url的限流
                  <br/>
                                    4. 存在一定量的误判: 负载+异步延迟导致的
                  <br/>
                                    5. 优化了让限流服务更能抗: 纯内存操作
                  <br/>
                </span>
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="1337" y="814" fill="#666600" font-family="Helvetica" font-size="14px">
                    1. kwqps的api单机是一定扛不住的...
        </text>
      </switch>
    </g>
    <rect x="1215" y="850" width="100" height="45" rx="6.75" ry="6.75" fill="#ffffff" stroke="#000000" pointer-events="none"/>
    <path d="M 1160 850 L 1160 862.5 Q 1160 872.5 1170 872.5 L 1208.63 872.5" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/>
    <path d="M 1213.88 872.5 L 1206.88 876 L 1208.63 872.5 L 1206.88 869 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 1265 820 L 1265 830 Q 1265 840 1265 835 L 1265 832.5 Q 1265 830 1265 836.82 L 1265 843.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 1265 848.88 L 1261.5 841.88 L 1265 843.63 L 1268.5 841.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 1237 711 L 1258.06 700.47 Q 1267 696 1275.94 700.47 L 1318.06 721.53 Q 1327 726 1318.06 730.47 L 1275.94 751.53 Q 1267 756 1258.06 751.53 L 1215.94 730.47 Q 1207 726 1215.94 721.53 Z" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 726px; margin-left: 1208px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                                限流服务:
                <br/>
                                token池是否有token
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="1267" y="730" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    限流服务:...
        </text>
      </switch>
    </g>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 630px; margin-left: 1162px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: nowrap; ">
                                局部中心思想
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="1162" y="634" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    局部中心思想
        </text>
      </switch>
    </g>
    <rect x="1219" y="854" width="100" height="45" rx="6.75" ry="6.75" fill="#ffffff" stroke="#000000" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 98px; height: 1px; padding-top: 877px; margin-left: 1220px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                                业务: 内有单机限流作为fallback
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="1269" y="880" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    业务: 内有单机限流作为fallback
        </text>
      </switch>
    </g>
    <path d="M 220 650 L 272.5 650 Q 282.5 650 282.5 640 L 282.5 405 Q 282.5 395 292.5 395 L 338.63 395" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 343.88 395 L 336.88 398.5 L 338.63 395 L 336.88 391.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 220 650 L 272.5 650 Q 282.5 650 282.5 640 L 282.5 595 Q 282.5 585 292.5 585 L 338.63 585" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 343.88 585 L 336.88 588.5 L 338.63 585 L 336.88 581.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 220 650 L 272.5 650 Q 282.5 650 282.5 660 L 282.5 735 Q 282.5 745 292.5 745 L 338.63 745" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 343.88 745 L 336.88 748.5 L 338.63 745 L 336.88 741.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 220 650 L 272.5 650 Q 282.5 650 282.5 660 L 282.5 895 Q 282.5 905 292.5 905 L 338.63 905" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 343.88 905 L 336.88 908.5 L 338.63 905 L 336.88 901.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 145 625 L 145 551.37" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 145 546.12 L 148.5 553.12 L 145 551.37 L 141.5 553.12 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 145 675 L 145 687.5 Q 145 697.5 145.03 705.57 L 145.06 713.63" fill="none" stroke="#23445d" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 145.08 718.88 L 141.55 711.9 L 145.06 713.63 L 148.55 711.87 Z" fill="#23445d" stroke="#23445d" stroke-miterlimit="10" pointer-events="none"/>
    <rect x="70" y="625" width="150" height="50" rx="7.5" ry="7.5" fill="#f8cecc" stroke="#b85450" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 148px; height: 1px; padding-top: 650px; margin-left: 71px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                                限流实现:4
                <br/>
                                看需求: 如购买(难得)则漏桶
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="145" y="654" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    限流实现:4...
        </text>
      </switch>
    </g>
    <rect x="1080" y="0" width="400" height="50" rx="7.5" ry="7.5" fill="#f8cecc" stroke="#b85450" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 398px; height: 1px; padding-top: 25px; margin-left: 1081px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                                限流系统设计
                <br/>
                                https://hardcore.feishu.cn/docs/doccnvQAX7MWAZA4PRlxXoBPPyf
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="1280" y="29" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    限流系统设计
https://hardcore.feishu.cn/docs/doccnvQAX7MWAZA4PRlxXoBPPyf
        </text>
      </switch>
    </g>
    <path d="M 465 395 L 498.75 395 Q 508.75 395 508.75 399.75 L 508.75 402.13 Q 508.75 404.5 518.75 404.51 L 546.13 404.53" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 551.38 404.53 L 544.38 408.03 L 546.13 404.53 L 544.38 401.03 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 405 420 L 405 553.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 405 558.88 L 401.5 551.88 L 405 553.63 L 408.5 551.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 526px; margin-left: 405px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">
                                突发流量
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="405" y="529" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">
                    突发流量
        </text>
      </switch>
    </g>
    <rect x="345" y="370" width="120" height="50" rx="7.5" ry="7.5" fill="#dae8fc" stroke="#6c8ebf" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 395px; margin-left: 346px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                                2.漏桶算法
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="405" y="399" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    2.漏桶算法
        </text>
      </switch>
    </g>
    <path d="M 465 585 L 498.75 585 Q 508.75 585 518.75 585.02 L 546.13 585.07" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 551.38 585.08 L 544.38 588.57 L 546.13 585.07 L 544.39 581.57 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <rect x="345" y="560" width="120" height="50" rx="7.5" ry="7.5" fill="#ffffff" stroke="#000000" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 585px; margin-left: 346px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                                3.令牌桶算法
                <br/>
                <font color="#ff0080">
                                    生产者消费者模式
                </font>
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="405" y="589" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    3.令牌桶算法...
        </text>
      </switch>
    </g>
    <path d="M 465 745 L 498.75 745 Q 508.75 745 508.75 735 L 508.75 720 Q 508.75 710 518.75 710 L 546.13 710" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 551.38 710 L 544.38 713.5 L 546.13 710 L 544.38 706.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 465 745 L 498.75 745 Q 508.75 745 508.75 755 L 508.75 775 Q 508.75 785 518.75 785 L 546.13 785" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 551.38 785 L 544.38 788.5 L 546.13 785 L 544.38 781.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <rect x="345" y="720" width="120" height="50" rx="7.5" ry="7.5" fill="#ffffff" stroke="#000000" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 745px; margin-left: 346px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                                4.拥塞串口
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="405" y="749" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    4.拥塞串口
        </text>
      </switch>
    </g>
    <path d="M 465 905 L 507.5 905 Q 517.5 905 517.5 895 L 517.5 870 Q 517.5 860 527.5 860 L 563.63 860" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 568.88 860 L 561.88 863.5 L 563.63 860 L 561.88 856.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 465 905 L 507.5 905 Q 517.5 905 517.5 915 L 517.5 940 Q 517.5 950 527.5 950 L 563.63 950" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 568.88 950 L 561.88 953.5 L 563.63 950 L 561.88 946.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 405 880 L 405 776.37" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/>
    <path d="M 405 771.12 L 408.5 778.12 L 405 776.37 L 401.5 778.12 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <rect x="345" y="880" width="120" height="50" rx="7.5" ry="7.5" fill="#ffffff" stroke="#000000" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 905px; margin-left: 346px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                                1.计数法
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="405" y="909" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    1.计数法
        </text>
      </switch>
    </g>
    <ellipse cx="145" cy="522.5" rx="42.5" ry="22.5" fill="#dae8fc" stroke="#6c8ebf" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 83px; height: 1px; padding-top: 523px; margin-left: 104px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                                guava
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="145" y="526" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    guava
        </text>
      </switch>
    </g>
    <path d="M 160 150 L 200 150 Q 210 150 210 140 L 210 45 Q 210 35 220 35 L 253.63 35" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 258.88 35 L 251.88 38.5 L 253.63 35 L 251.88 31.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 160 150 L 253.63 150" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 258.88 150 L 251.88 153.5 L 253.63 150 L 251.88 146.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 160 150 L 200 150 Q 210 150 210 160 L 210 230 Q 210 240 220 240 L 253.63 240" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 258.88 240 L 251.88 243.5 L 253.63 240 L 251.88 236.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <rect x="10" y="125" width="150" height="50" rx="7.5" ry="7.5" fill="#ffffff" stroke="#000000" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 148px; height: 1px; padding-top: 150px; margin-left: 11px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                                限流简介
                <br/>
                                流量整形(漏桶)
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="85" y="154" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    限流简介
流量整形(漏桶)
        </text>
      </switch>
    </g>
    <path d="M 350 35 L 413.63 35" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 418.88 35 L 411.88 38.5 L 413.63 35 L 411.88 31.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <rect x="260" y="10" width="90" height="50" rx="7.5" ry="7.5" fill="#ffffff" stroke="#000000" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 88px; height: 1px; padding-top: 35px; margin-left: 261px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                                是什么
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="305" y="39" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    是什么
        </text>
      </switch>
    </g>
    <path d="M 350 150 L 375 150 Q 385 150 385 140 L 385 110 Q 385 100 395 100 L 413.63 100" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 418.88 100 L 411.88 103.5 L 413.63 100 L 411.88 96.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 350 150 L 375 150 Q 385 150 385 160 L 385 190 Q 385 200 395 200 L 413.63 200" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 418.88 200 L 411.88 203.5 L 413.63 200 L 411.88 196.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 350 150 L 413.63 150" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 418.88 150 L 411.88 153.5 L 413.63 150 L 411.88 146.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <rect x="260" y="125" width="90" height="50" rx="7.5" ry="7.5" fill="#ffffff" stroke="#000000" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 88px; height: 1px; padding-top: 150px; margin-left: 261px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                                为什么
                <br/>
                                预估+压测
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="305" y="154" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    为什么
预估+压测
        </text>
      </switch>
    </g>
    <path d="M 260 240 L 155 240 Q 145 240 145 250 L 145 618.63" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/>
    <path d="M 145 623.88 L 141.5 616.88 L 145 618.63 L 148.5 616.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <rect x="260" y="220" width="90" height="40" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 88px; height: 1px; padding-top: 240px; margin-left: 261px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                                怎么做
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="305" y="244" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    怎么做
        </text>
      </switch>
    </g>
    <rect x="420" y="80" width="100" height="40" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 98px; height: 1px; padding-top: 100px; margin-left: 421px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                                保护系统资源
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="470" y="104" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    保护系统资源
        </text>
      </switch>
    </g>
    <rect x="420" y="180" width="100" height="40" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 98px; height: 1px; padding-top: 200px; margin-left: 421px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                                防止服务被打垮
                <br/>
                                引起雪崩
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="470" y="204" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    防止服务被打垮...
        </text>
      </switch>
    </g>
    <rect x="420" y="130" width="100" height="40" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 98px; height: 1px; padding-top: 150px; margin-left: 421px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                                保住部分可用性
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="470" y="154" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    保住部分可用性
        </text>
      </switch>
    </g>
    <rect x="420" y="10" width="100" height="50" rx="7.5" ry="7.5" fill="#ffffff" stroke="#000000" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 98px; height: 1px; padding-top: 35px; margin-left: 421px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                                拒绝用户情报并报错提示
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="470" y="39" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    拒绝用户情报并报错提示
        </text>
      </switch>
    </g>
    <rect x="570" y="830" width="130" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 128px; height: 1px; padding-top: 860px; margin-left: 571px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                <div>
                  <span>
                                        实现原理:
                  </span>
                </div>
                <div>
                  <span>
                                        段时间延迟归零
                  </span>
                </div>
                <div>
                  <span>
                                        超出阈值则限流
                  </span>
                </div>
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="635" y="864" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    实现原理:...
        </text>
      </switch>
    </g>
    <rect x="570" y="920" width="130" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 128px; height: 1px; padding-top: 950px; margin-left: 571px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                                问题: 存在漏报, 每秒内也是不均匀的, 在某个串口内最大是2倍
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="635" y="954" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    问题: 存在漏报, 每秒内也是不均匀的, 在某个串口内最大是2倍
        </text>
      </switch>
    </g>
    <path d="M 335 600 L 469 600 L 480 611 L 480 670 L 335 670 L 335 600 Z" fill="#fff2cc" stroke="#d6b656" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 469 600 L 469 611 L 480 611" fill="none" stroke="#d6b656" stroke-miterlimit="10" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 143px; height: 1px; padding-top: 635px; margin-left: 336px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: #666600; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                <div style="text-align: left">
                  <span style="font-size: 12px">
                                        1. 可以应对突发流量
                  </span>
                </div>
                <div style="text-align: left">
                  <span style="font-size: 12px">
                                        2. 但是会漏报: 幅度小
                  </span>
                </div>
                <div style="text-align: left">
                  <span style="font-size: 12px">
                                        -
                  </span>
                  <font style="font-size: 11px">
                                        一瞬间将满桶资源吃完
                  </font>
                </div>
                <div style="text-align: left">
                  <span style="font-size: 12px">
                                        - 但是后面就是均匀的
                  </span>
                </div>
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="408" y="639" fill="#666600" font-family="Helvetica" font-size="14px" text-anchor="middle">
                    1. 可以应对突发流量...
        </text>
      </switch>
    </g>
    <path d="M 332.5 410 L 459 410 L 470 421 L 470 510 L 332.5 510 L 332.5 410 Z" fill="#fff2cc" stroke="#d6b656" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 459 410 L 459 421 L 470 421" fill="none" stroke="#d6b656" stroke-miterlimit="10" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 136px; height: 1px; padding-top: 460px; margin-left: 334px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: #666600; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                <div style="text-align: left">
                  <font style="font-size: 10px">
                                        1. 不可以应对突发流量
                  </font>
                </div>
                <div style="text-align: left">
                  <font style="font-size: 10px">
                                        - 也可以, 支持耗时
                  </font>
                </div>
                <div style="text-align: left">
                  <font style="font-size: 10px">
                                        2. 但是不会漏报
                  </font>
                </div>
                <div style="text-align: left">
                  <span style="font-size: 12px">
                  </span>
                  <font style="font-size: 10px">
                                        - 请求被持有:
                    <font color="#ff0080">
                                            削峰填谷段
                    </font>
                  </font>
                </div>
                <div style="text-align: left">
                  <font style="font-size: 13px">
                  </font>
                  <font style="font-size: 10px">
                                        - 就占用系统资源
                  </font>
                </div>
                <div style="text-align: left">
                  <font style="font-size: 13px">
                  </font>
                  <font style="font-size: 10px">
                                        - 增加请求耗时
                  </font>
                </div>
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="401" y="464" fill="#666600" font-family="Helvetica" font-size="14px" text-anchor="middle">
                    1. 不可以应对突发流量...
        </text>
      </switch>
    </g>
    <path d="M 335 760 L 469 760 L 480 771 L 480 810 L 335 810 L 335 760 Z" fill="#fff2cc" stroke="#d6b656" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 469 760 L 469 771 L 480 771" fill="none" stroke="#d6b656" stroke-miterlimit="10" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 143px; height: 1px; padding-top: 785px; margin-left: 336px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: #666600; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                <div style="text-align: left">
                  <span style="font-size: 12px">
                                        1. 可以应对突发流量
                  </span>
                </div>
                <div style="text-align: left">
                  <span style="font-size: 12px">
                                        2. 且不会漏报
                  </span>
                </div>
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="408" y="789" fill="#666600" font-family="Helvetica" font-size="14px" text-anchor="middle">
                    1. 可以应对突发流量...
        </text>
      </switch>
    </g>
    <path d="M 0 300 L 249 300 L 260 311 L 260 390 L 0 390 L 0 300 Z" fill="#fff2cc" stroke="#d6b656" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 249 300 L 249 311 L 260 311" fill="none" stroke="#d6b656" stroke-miterlimit="10" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 258px; height: 1px; padding-top: 345px; margin-left: 2px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: left; ">
              <div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: #666600; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                <div>
                  <span style="font-size: 12px">
                                        1. 漏报维度: n
                  </span>
                </div>
                <div>
                  <span style="font-size: 12px">
                                        计数法[2n]--令牌桶[平2n]--拥塞串口/漏桶[n]
                  </span>
                </div>
                <div>
                  <span style="font-size: 12px">
                                        2. 突发流量: n
                  </span>
                </div>
                <div>
                  <span style="font-size: 12px">
                                        漏桶[n]--拥塞串口[n]--令牌桶[平2n]--计数法[2n]
                  </span>
                </div>
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="2" y="349" fill="#666600" font-family="Helvetica" font-size="14px">
                    1. 漏报维度: n...
        </text>
      </switch>
    </g>
    <path d="M 717.5 710 L 733.75 710 Q 743.75 710 743.75 720 L 743.75 755 Q 743.75 765 753.69 765 L 763.63 765" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 768.88 765 L 761.88 768.5 L 763.63 765 L 761.88 761.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <rect x="552.5" y="690" width="165" height="40" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 163px; height: 1px; padding-top: 710px; margin-left: 554px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                                实现: 环形数组+双指针+递归
                <br/>
                                || 直接使用优先队列 + 递归
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="635" y="714" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    实现: 环形数组+双指针+递归...
        </text>
      </switch>
    </g>
    <rect x="552.5" y="765" width="165" height="40" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 163px; height: 1px; padding-top: 785px; margin-left: 554px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                                实现: redis-zset
                <br/>
                                zremrangebyscore
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="635" y="789" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    实现: redis-zset...
        </text>
      </switch>
    </g>
    <path d="M 770 650 L 919 650 L 930 661 L 930 880 L 770 880 L 770 650 Z" fill="#fff2cc" stroke="#d6b656" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 919 650 L 919 661 L 930 661" fill="none" stroke="#d6b656" stroke-miterlimit="10" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 158px; height: 1px; padding-top: 765px; margin-left: 772px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: left; ">
              <div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: #666600; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                <div>
                  <span style="font-size: 12px">
                                        func check() bool {
                  </span>
                </div>
                <div>
                  <span style="font-size: 12px">
                                        // 窗口未满
                  </span>
                </div>
                <div>
                  <span style="font-size: 12px">
                                        if (startTime + T) &gt; now
                  </span>
                  <span style="font-size: 12px">
                                        {
                  </span>
                </div>
                <div>
                  <span style="font-size: 12px">
                                        if heap.Size() &gt; M {
                  </span>
                </div>
                <div>
                  <span style="font-size: 12px">
                                        return false
                  </span>
                </div>
                <div>
                  <span style="font-size: 12px">
                                        }
                  </span>
                </div>
                <div>
                  <span style="font-size: 12px">
                                        heap.Push(now)
                  </span>
                </div>
                <div>
                  <span style="font-size: 12px">
                                        return true
                  </span>
                </div>
                <div>
                  <span style="font-size: 12px">
                                        }
                  </span>
                </div>
                <span style="font-size: 12px">
                                    // 窗口已满: 左边界右移
                </span>
                <div>
                  <span style="font-size: 12px">
                                        t := heap.Pop()
                  </span>
                </div>
                <div>
                  <span style="font-size: 12px">
                                        startTime = heap.Pop()
                  </span>
                </div>
                <div>
                  <span style="font-size: 12px">
                                        return check()
                  </span>
                </div>
                <div>
                  <span style="font-size: 12px">
                                        }
                    <br/>
                  </span>
                </div>
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="772" y="769" fill="#666600" font-family="Helvetica" font-size="14px">
                    func check() bool {...
        </text>
      </switch>
    </g>
    <rect x="552.5" y="319.07" width="227.5" height="170.93" rx="11.97" ry="11.97" fill="#ffffff" stroke="#000000" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 226px; height: 1px; padding-top: 405px; margin-left: 554px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                <div style="text-align: left">
                  <span>
                                        1. 任意流入, 恒定速率流出请求, 被处理
                  </span>
                </div>
                <div style="text-align: left">
                  <span>
                                        2. 请求来了之后被放入桶中, 待处理
                  </span>
                </div>
                <div style="text-align: left">
                  <div>
                                        3. 适合处理间歇性突发流量
                  </div>
                  <div>
                                        - 漏出轻轻的速率和服务处理持平
                  </div>
                  <div>
                                        4. 实现不能以桶的角度思考
                  </div>
                  <div>
                                        - 必须以流出请求思考 + sleep
                  </div>
                  <div>
                                        - 算出等待时间后sleep
                  </div>
                  <div>
                                        5. 一瞬间把桶干满了, 接下来机会拒绝
                  </div>
                  <div>
                                        - 即使
                    <span>
                                            后面
                    </span>
                    <span>
                                            下一时间段没有请求
                    </span>
                  </div>
                  <div>
                                        6.
                    <font color="#ff0080">
                                            超过桶的水: 丢弃 &amp;&amp; 等待
                    </font>
                  </div>
                  <div>
                                        - 知道等待时间,则可以决定是否等待
                    <font color="#ff0080">
                      <br/>
                    </font>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="666" y="408" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    1. 任意流入, 恒定速率流出请求, 被处理...
        </text>
      </switch>
    </g>
    <path d="M 780 585.08 L 790 585.08 Q 800 585.08 800 575.08 L 800 551.58 Q 800 541.58 806.82 541.58 L 813.63 541.57" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 818.88 541.57 L 811.89 545.07 L 813.63 541.57 L 811.88 538.07 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <rect x="552.5" y="531.88" width="227.5" height="106.25" rx="7.44" ry="7.44" fill="#ffffff" stroke="#000000" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 226px; height: 1px; padding-top: 585px; margin-left: 554px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                <div style="text-align: left">
                  <span>
                                        1. 以恒定速率向令牌桶中放入令牌
                  </span>
                </div>
                <div style="text-align: left">
                  <span>
                                        2. 请求拿到令牌则可处理, 拿不到则限流
                  </span>
                </div>
                <div style="text-align: left">
                  <span>
                                        3. 一瞬间消耗完桶令牌
                  </span>
                </div>
                <div style="text-align: left">
                  <span>
                                        - 之后还能有序的处理一些请求[漏报]
                  </span>
                </div>
                <div style="text-align: left">
                  <span>
                                        4. guava#rl: 冷启动, 动态调整令牌速率
                  </span>
                </div>
                <div style="text-align: left">
                                    5. 冷启动/预热:
                </div>
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="666" y="589" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    1. 以恒定速率向令牌桶中放入令牌...
        </text>
      </switch>
    </g>
    <path d="M 335 925 L 469 925 L 480 936 L 480 975 L 335 975 L 335 925 Z" fill="#fff2cc" stroke="#d6b656" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 469 925 L 469 936 L 480 936" fill="none" stroke="#d6b656" stroke-miterlimit="10" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 143px; height: 1px; padding-top: 950px; margin-left: 336px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: #666600; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                <div style="text-align: left">
                  <span style="font-size: 12px">
                                        1. 可以应对突发流量
                  </span>
                </div>
                <div style="text-align: left">
                  <span style="font-size: 12px">
                                        2. 且不会漏报
                  </span>
                </div>
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="408" y="954" fill="#666600" font-family="Helvetica" font-size="14px" text-anchor="middle">
                    1. 可以应对突发流量...
        </text>
      </switch>
    </g>
    <rect x="31.25" y="720" width="227.5" height="50" rx="7.5" ry="7.5" fill="#bac8d3" stroke="#23445d" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 226px; height: 1px; padding-top: 745px; margin-left: 32px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                                方便做自适应限流, 根据下游压力调节流速
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="145" y="749" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    方便做自适应限流, 根据下游压力调节流速
        </text>
      </switch>
    </g>
    <path d="M 1437.5 525 L 1491.13 525" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 1496.38 525 L 1489.38 528.5 L 1491.13 525 L 1489.38 521.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 1267.5 525 L 1233.87 525" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 1228.62 525 L 1235.62 521.5 L 1233.87 525 L 1235.62 528.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <rect x="1267.5" y="500" width="170" height="50" rx="5" ry="5" fill="#ffffff" stroke="#000000" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 168px; height: 1px; padding-top: 525px; margin-left: 1269px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                                一种思路: 将发放令牌这件事情独立出去异步做, 余下的事情就是保证token桶服务能抗kwqps
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="1353" y="529" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    一种思路: 将发放令牌这件事情独立出去异步做, 余下的事情就是保证token桶服务能抗kwqps
        </text>
      </switch>
    </g>
    <path d="M 910 63.75 L 1054 63.75 L 1065 74.75 L 1065 200 L 910 200 L 910 63.75 Z" fill="#fff2cc" stroke="#d6b656" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 1054 63.75 L 1054 74.75 L 1065 74.75" fill="none" stroke="#d6b656" stroke-miterlimit="10" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 153px; height: 1px; padding-top: 132px; margin-left: 912px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: left; ">
              <div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: #666600; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                <div>
                  <span style="font-size: 12px">
                                        核心功能需求
                  </span>
                </div>
                <div>
                  <span style="font-size: 12px">
                                        1. 千万级QPS分布式限流
                  </span>
                </div>
                <div>
                  <span style="font-size: 12px">
                                        - 限流服务能抗住
                  </span>
                </div>
                <div>
                  <span style="font-size: 12px">
                                        - 做精准限流
                  </span>
                </div>
                <div>
                  <span style="font-size: 12px">
                                        2. 决不能漏报
                  </span>
                </div>
                <div>
                  <span style="font-size: 12px">
                                        3. 尽可能较少误报
                  </span>
                </div>
                <div>
                  <span style="font-size: 12px">
                                        4. 尽可能减少成本: 带宽
                  </span>
                </div>
                <div>
                  <span style="font-size: 12px">
                                        5. 低延迟: 局部式中心限流
                  </span>
                </div>
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="912" y="136" fill="#666600" font-family="Helvetica" font-size="14px">
                    核心功能需求  1. 千万级QPS分布式限流...
        </text>
      </switch>
    </g>
    <path d="M 910 213.75 L 1039 213.75 L 1050 224.75 L 1050 310 L 910 310 L 910 213.75 Z" fill="#fff2cc" stroke="#d6b656" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 1039 213.75 L 1039 224.75 L 1050 224.75" fill="none" stroke="#d6b656" stroke-miterlimit="10" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 138px; height: 1px; padding-top: 262px; margin-left: 912px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: left; ">
              <div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: #666600; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                <div>
                  <span style="font-size: 12px">
                                        一般实现场景
                  </span>
                </div>
                <div>
                  <span style="font-size: 12px">
                    <br/>
                  </span>
                </div>
                <div>
                  <span style="font-size: 12px">
                                        1. 低QPS高定度
                  </span>
                </div>
                <div>
                  <span style="font-size: 12px">
                                        2. 高QPS低精度
                  </span>
                </div>
                <div>
                  <span style="font-size: 12px">
                                        3. 高QPS高精度:
                  </span>
                  <span style="font-size: 12px">
                                        红包
                  </span>
                </div>
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="912" y="266" fill="#666600" font-family="Helvetica" font-size="14px">
                    一般实现场景1. 低QPS高定度...
        </text>
      </switch>
    </g>
    <path d="M 1352.5 470 L 1352.5 480.08 Q 1352.5 490.08 1352.5 485.04 L 1352.5 482.52 Q 1352.5 480 1352.5 486.82 L 1352.5 493.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 1352.5 498.88 L 1349 491.88 L 1352.5 493.63 L 1356 491.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 1547.5 542.5 L 1547.5 576.25 Q 1547.5 586.25 1541.25 586.25 L 1538.13 586.25 Q 1535 586.25 1535 596.25 L 1535 623.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 1535 628.88 L 1531.5 621.88 L 1535 623.63 L 1538.5 621.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <rect x="1497.5" y="507.5" width="100" height="35" rx="3.5" ry="3.5" fill="#f5f5f5" stroke="#666666" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 98px; height: 1px; padding-top: 525px; margin-left: 1499px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #333333; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                                抗不住kwqps请求
                <br/>
                                或者代价太大
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="1548" y="529" fill="#333333" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    抗不住kwqps请求...
        </text>
      </switch>
    </g>
    <path d="M 1182.5 545 L 1182.5 567.5 Q 1182.5 577.5 1192.5 577.5 L 1345 577.5 Q 1355 577.5 1355 587.5 L 1355 603.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 1355 608.88 L 1351.5 601.88 L 1355 603.63 L 1358.5 601.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <rect x="1137.5" y="505" width="90" height="40" rx="4" ry="4" fill="#ffffff" stroke="#000000" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 88px; height: 1px; padding-top: 525px; margin-left: 1139px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                                百万级别QPS
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="1183" y="529" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    百万级别QPS
        </text>
      </switch>
    </g>
    <rect x="1100" y="63.75" width="505" height="406.25" rx="12.19" ry="12.19" fill="#f5f5f5" stroke="#666666" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 503px; height: 1px; padding-top: 267px; margin-left: 1101px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #333333; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                <div style="text-align: left">
                  <br/>
                </div>
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="1353" y="270" fill="#333333" font-family="Helvetica" font-size="12px" text-anchor="middle">
        </text>
      </switch>
    </g>
    <rect x="1130" y="90" width="160" height="40" rx="4" ry="4" fill="#ffffff" stroke="#000000" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 158px; height: 1px; padding-top: 110px; margin-left: 1131px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                <div style="text-align: left">
                                    千万级别的限流: 1kwqps
                </div>
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="1210" y="114" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    千万级别的限流: 1kwqps
        </text>
      </switch>
    </g>
    <rect x="1155" y="160" width="110" height="33.75" rx="3.38" ry="3.38" fill="#fad9d5" stroke="#ae4132" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 108px; height: 1px; padding-top: 177px; margin-left: 1156px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                                负载均衡:10台
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="1210" y="180" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    负载均衡:10台
        </text>
      </switch>
    </g>
    <path d="M 1210 130 L 1210 140 Q 1210 150 1210 145 L 1210 142.5 Q 1210 140 1210 146.82 L 1210 153.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 1210 158.88 L 1206.5 151.88 L 1210 153.63 L 1213.5 151.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 150px; margin-left: 1210px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">
                                lvs
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="1210" y="154" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">
                    lvs
        </text>
      </switch>
    </g>
    <rect x="1145" y="215" width="130" height="33.75" rx="3.38" ry="3.38" fill="#ffffff" stroke="#000000" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 128px; height: 1px; padding-top: 232px; margin-left: 1146px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                                负载后每台处理100w
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="1210" y="235" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    负载后每台处理100w
        </text>
      </switch>
    </g>
    <path d="M 1210 193.75 L 1210 203.83 Q 1210 213.83 1210 204.42 L 1210 199.71 Q 1210 195 1210 201.82 L 1210 208.63" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/>
    <path d="M 1210 213.88 L 1206.5 206.88 L 1210 208.63 L 1213.5 206.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <rect x="1140" y="271.25" width="140" height="33.75" rx="3.38" ry="3.38" fill="#fad9d5" stroke="#ae4132" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 138px; height: 1px; padding-top: 288px; margin-left: 1141px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                                redis cluster 分片: 40
                <br/>
                                请求hash到这40个分片上
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="1210" y="292" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    redis cluster 分片: 40...
        </text>
      </switch>
    </g>
    <path d="M 1210 248.75 L 1210 258.83 Q 1210 268.83 1210 260.08 L 1210 255.71 Q 1210 251.33 1210 258.11 L 1210 264.88" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/>
    <path d="M 1210 270.13 L 1206.5 263.13 L 1210 264.88 L 1213.5 263.13 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <rect x="1150" y="340" width="120" height="40" rx="4" ry="4" fill="#ffffff" stroke="#000000" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 360px; margin-left: 1151px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                                每个分片处理2.5w,
                <br/>
                                其中1w要被限流住
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="1210" y="364" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    每个分片处理2.5w,...
        </text>
      </switch>
    </g>
    <path d="M 1210 305 L 1210 315.08 Q 1210 325.08 1210 322.54 L 1210 321.27 Q 1210 320 1210 326.82 L 1210 333.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 1210 338.88 L 1206.5 331.88 L 1210 333.63 L 1213.5 331.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <rect x="1295" y="253.13" width="130" height="70" rx="7" ry="7" fill="#ffffff" stroke="#000000" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 128px; height: 1px; padding-top: 288px; margin-left: 1297px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: left; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                                1. hash一致性算法
                <br/>
                                2. 从机数据不用: 延迟
                <br/>
                                3. 分组思想: 多个几点加到一起能抗100wqps
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="1297" y="292" fill="#000000" font-family="Helvetica" font-size="12px">
                    1. hash一致性算法...
        </text>
      </switch>
    </g>
    <path d="M 1280 288.17 L 1293.63 288.17" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 1298.88 288.17 L 1291.88 291.67 L 1293.63 288.17 L 1291.88 284.67 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <rect x="1290" y="341.25" width="160" height="38.75" rx="3.88" ry="3.88" fill="#bac8d3" stroke="#23445d" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 158px; height: 1px; padding-top: 361px; margin-left: 1291px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                                单机滑动窗口lua大概抗 1w+
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="1370" y="364" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    单机滑动窗口lua大概抗 1w+
        </text>
      </switch>
    </g>
    <path d="M 1270 360 L 1283.63 360" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 1288.88 360 L 1281.88 363.5 L 1283.63 360 L 1281.88 356.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <rect x="1465" y="266.88" width="130" height="42.5" rx="4.25" ry="4.25" fill="#b1ddf0" stroke="#10739e" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 128px; height: 1px; padding-top: 288px; margin-left: 1466px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                                这里就可能存在误报
                <br/>
                                保证均衡的到每个分片
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="1530" y="292" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    这里就可能存在误报
保证均衡的到每个分片
        </text>
      </switch>
    </g>
    <path d="M 1425 288.08 L 1435 288.08 Q 1445 288.08 1451.82 288.11 L 1458.63 288.14" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 1463.88 288.16 L 1456.87 291.63 L 1458.63 288.14 L 1456.9 284.63 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <rect x="1315" y="156.88" width="160" height="40" rx="4" ry="4" fill="#dae8fc" stroke="#6c8ebf" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 158px; height: 1px; padding-top: 177px; margin-left: 1316px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                <div style="text-align: left">
                  <span>
                                        4层只能IP分发: 没啥用
                  </span>
                </div>
                <div style="text-align: left">
                  <span>
                                        7层才能针对url
                  </span>
                </div>
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="1395" y="180" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    4层只能IP分发: 没啥用...
        </text>
      </switch>
    </g>
    <path d="M 1265 176.87 L 1308.63 176.87" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 1313.88 176.87 L 1306.88 180.37 L 1308.63 176.87 L 1306.88 173.37 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <rect x="1315" y="90" width="160" height="40" rx="4" ry="4" fill="#fff2cc" stroke="#d6b656" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 158px; height: 1px; padding-top: 110px; margin-left: 1316px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                <div style="text-align: left">
                                    本质是分治
                </div>
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="1395" y="114" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    本质是分治
        </text>
      </switch>
    </g>
    <path d="M 1290 110 L 1300 110 Q 1310 110 1302.5 110 L 1298.75 110 Q 1295 110 1301.82 110 L 1308.63 110" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 1313.88 110 L 1306.88 113.5 L 1308.63 110 L 1306.88 106.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 1240 407.5 L 1240 397.5 Q 1240 387.5 1240 393.75 L 1240 396.88 Q 1240 400 1240 393.18 L 1240 386.37" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/>
    <path d="M 1240 381.12 L 1243.5 388.12 L 1240 386.37 L 1236.5 388.12 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <rect x="1210" y="407.5" width="60" height="27.5" rx="2.75" ry="2.75" fill="#ffffff" stroke="#000000" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 58px; height: 1px; padding-top: 421px; margin-left: 1211px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                                业务服务
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="1240" y="425" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    业务服务
        </text>
      </switch>
    </g>
    <rect x="1305" y="396.25" width="130" height="50" rx="5" ry="5" fill="#e1d5e7" stroke="#9673a6" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 128px; height: 1px; padding-top: 421px; margin-left: 1306px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                                通过控制面获取业务服务数量动态反馈限流的上限, 减小误报
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="1370" y="425" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    通过控制面获取业务服务数量动态反馈限流的上限, 减小误报
        </text>
      </switch>
    </g>
    <path d="M 1270 421.25 L 1280 421.25 Q 1290 421.25 1294.32 421.27 L 1298.63 421.3" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 1303.88 421.33 L 1296.86 424.79 L 1298.63 421.3 L 1296.9 417.79 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <rect x="1465" y="396.25" width="130" height="50" rx="5" ry="5" fill="#e1d5e7" stroke="#9673a6" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 128px; height: 1px; padding-top: 421px; margin-left: 1466px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                                控制面可以使用服务发现, 内部保证一致性
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="1530" y="425" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    控制面可以使用服务发现, 内部保证一致性
        </text>
      </switch>
    </g>
    <path d="M 1435 421.33 L 1445 421.33 Q 1455 421.33 1450 421.33 L 1447.5 421.33 Q 1445 421.33 1451.82 421.33 L 1458.63 421.33" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 1463.88 421.33 L 1456.88 424.83 L 1458.63 421.33 L 1456.88 417.83 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <rect x="1465" y="323.13" width="130" height="50" rx="5" ry="5" fill="#e1d5e7" stroke="#9673a6" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 128px; height: 1px; padding-top: 348px; margin-left: 1466px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                                控制面就可以无状态扩展,实现高可用
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="1530" y="352" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    控制面就可以无状态扩展,实现高可用
        </text>
      </switch>
    </g>
    <path d="M 1530 396.25 L 1530 386.29 Q 1530 376.33 1530 384.71 L 1530 388.9 Q 1530 393.08 1530 386.29 L 1530 379.5" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 1530 374.25 L 1533.5 381.25 L 1530 379.5 L 1526.5 381.25 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 1125 435 L 1125 424.42 Q 1125 414.42 1135 414.41 L 1203.63 414.38" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/>
    <path d="M 1208.88 414.38 L 1201.88 417.88 L 1203.63 414.38 L 1201.88 410.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 415px; margin-left: 1159px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; background-color: #999900; white-space: nowrap; ">
                                动态调整每个
                <br/>
                                服务的限流阈值
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="1159" y="418" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">
                    动态调整每个
服务的限流阈值
        </text>
      </switch>
    </g>
    <rect x="1110" y="435" width="60" height="25" rx="2.5" ry="2.5" fill="#ffffff" stroke="#000000" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 58px; height: 1px; padding-top: 448px; margin-left: 1111px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                                服务发现
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="1140" y="451" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    服务发现
        </text>
      </switch>
    </g>
    <path d="M 955 458.13 L 955 406.37" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 955 401.12 L 958.5 408.12 L 955 406.37 L 951.5 408.12 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 820 458.13 L 1079 458.13 L 1090 469.13 L 1090 625 L 820 625 L 820 458.13 Z" fill="#fff2cc" stroke="#d6b656" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 1079 458.13 L 1079 469.13 L 1090 469.13" fill="none" stroke="#d6b656" stroke-miterlimit="10" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 268px; height: 1px; padding-top: 542px; margin-left: 822px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: left; ">
              <div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: #666600; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                <div>
                  <div style="font-size: 10px">
                    <span>
                                            1. 冷启动QPS低: 初始化令牌桶已满
                    </span>
                  </div>
                  <div style="font-size: 10px">
                    <span>
                                            2. 低QPS持续: 以最大限流QPS数填充, 所以桶满
                    </span>
                  </div>
                  <div style="font-size: 10px">
                    <span>
                                            - 此时虽然桶是满的, 但是限流QPS远低于真实值
                    </span>
                  </div>
                  <div style="font-size: 10px">
                                        - 原因:
                    <font color="#ff0080">
                      <b>
                                                系统刚启动处理不了这么多请求
                      </b>
                    </font>
                  </div>
                  <div style="font-size: 10px">
                    <span>
                                            - 实现: warningQps是guava 的理论
                    </span>
                  </div>
                  <div style="font-size: 10px">
                    <span>
                                            3. 系统QPS增加: 令牌快速消耗, 以最大QPS填充还是在减少
                    </span>
                  </div>
                  <div style="font-size: 10px">
                    <span>
                                            - 冷启动阶段的限制QPS也在不断地提高, 直到最大QPS
                    </span>
                  </div>
                  <div style="font-size: 10px">
                    <span>
                                            - 消耗令牌快则允许的最大QPS就大: 那个公式
                    </span>
                  </div>
                  <div style="font-size: 10px">
                    <span>
                                            4. 之后就会按照最大QPS限流
                    </span>
                  </div>
                  <div>
                    <font style="font-size: 10px">
                                            5. 流量过去则会恢复
                    </font>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="822" y="546" fill="#666600" font-family="Helvetica" font-size="14px">
                    1. 冷启动QPS低: 初始化令牌桶已满...
        </text>
      </switch>
    </g>
    <path d="M 800 350 L 1099 350 L 1110 361 L 1110 400 L 800 400 L 800 350 Z" fill="#fff2cc" stroke="#d6b656" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 1099 350 L 1099 361 L 1110 361" fill="none" stroke="#d6b656" stroke-miterlimit="10" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 308px; height: 1px; padding-top: 375px; margin-left: 802px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: left; ">
              <div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: #666600; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                <div style="font-size: 8px">
                  <div> y(x)=m*x+n;
                  </div>
                  <div>
                                        在一定时间内, 为了达到最大 QPS, 过程中, 消耗的QPS数据
                    <span>
                                            与允许通过的QPS值的关系
                    </span>
                  </div>
                  <div>
                    <span>
                                            比如3分钟内为了到达1wqps, 当我消耗50个时, 下一步能通过的就应该是y(x)的值
                    </span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="802" y="379" fill="#666600" font-family="Helvetica" font-size="14px"> y(x)=m*x+n;...
        </text>
      </switch>
    </g>
  </g>
  <switch>
    <g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/>
    <a transform="translate(0,-5)" xlink:href="https://www.diagrams.net/doc/faq/svg-export-text-problems" target="_blank">
      <text text-anchor="middle" font-size="10px" x="50%" y="100%">
                Viewer does not support full SVG 1.1
      </text>
    </a>
  </switch>
</svg>
