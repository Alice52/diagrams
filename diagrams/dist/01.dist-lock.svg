<svg host="65bd71144e"
  xmlns="http://www.w3.org/2000/svg"
  xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="1291px" height="1371px" viewBox="-0.5 -0.5 1291 1371" content="&lt;mxfile&gt;&lt;diagram id=&quot;4w6R5Br1NufmC5YopjGi&quot; name=&quot;Page-1&quot;&gt;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&lt;/diagram&gt;&lt;/mxfile&gt;">
  <defs/>
  <g>
    <path d="M 140 420 L 172.5 420 Q 182.5 420 182.5 410 L 182.5 70 Q 182.5 60 192.5 60 L 218.63 60" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/>
    <path d="M 223.88 60 L 216.88 63.5 L 218.63 60 L 216.88 56.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/>
    <path d="M 140 420 L 172.5 420 Q 182.5 420 182.5 410 L 182.5 250 Q 182.5 240 192.5 240 L 218.63 240" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/>
    <path d="M 223.88 240 L 216.88 243.5 L 218.63 240 L 216.88 236.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/>
    <path d="M 140 420 L 172.5 420 Q 182.5 420 182.5 410 L 182.5 380 Q 182.5 370 192.5 370 L 218.63 370" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/>
    <path d="M 223.88 370 L 216.88 373.5 L 218.63 370 L 216.88 366.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/>
    <path d="M 140 420 L 172.5 420 Q 182.5 420 182.5 430 L 182.5 706 Q 182.5 716 192.5 716 L 218.63 716" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/>
    <path d="M 223.88 716 L 216.88 719.5 L 218.63 716 L 216.88 712.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/>
    <path d="M 140 420 L 172.5 420 Q 182.5 420 182.5 430 L 182.5 893 Q 182.5 903 192.5 903 L 218.63 903" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/>
    <path d="M 223.88 903 L 216.88 906.5 L 218.63 903 L 216.88 899.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/>
    <path d="M 140 420 L 172.5 420 Q 182.5 420 182.5 430 L 182.5 1050 Q 182.5 1060 192.5 1060 L 218.63 1060" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/>
    <path d="M 223.88 1060 L 216.88 1063.5 L 218.63 1060 L 216.88 1056.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/>
    <path d="M 80 390 L 80 316.37" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/>
    <path d="M 80 311.12 L 83.5 318.12 L 80 316.37 L 76.5 318.12 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/>
    <path d="M 140 420 L 172.5 420 Q 182.5 420 182.5 430 L 182.5 510 Q 182.5 520 192.5 520 L 218.63 520" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/>
    <path d="M 223.88 520 L 216.88 523.5 L 218.63 520 L 216.88 516.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/>
    <path d="M 80 450 L 80 513.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/>
    <path d="M 80 518.88 L 76.5 511.88 L 80 513.63 L 83.5 511.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/>
    <path d="M 140 420 L 172.5 420 Q 182.5 420 182.5 430 L 182.5 1295 Q 182.5 1305 192.5 1305 L 218.63 1305" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/>
    <path d="M 223.88 1305 L 216.88 1308.5 L 218.63 1305 L 216.88 1301.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/>
    <path d="M 140 420 L 172.5 420 Q 182.5 420 182.5 430 L 182.5 1165 Q 182.5 1175 192.5 1175 L 218.63 1175" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/>
    <path d="M 223.88 1175 L 216.88 1178.5 L 218.63 1175 L 216.88 1171.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/>
    <rect x="20" y="390" width="120" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 420px; margin-left: 21px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">
                                分布式锁:6+1
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="80" y="424" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    分布式锁:6+1
        </text>
      </switch>
    </g>
    <path d="M 345 60 L 375 60 Q 385 60 385 50 L 385 30 Q 385 20 395 20 L 418.63 20" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/>
    <path d="M 423.88 20 L 416.88 23.5 L 418.63 20 L 416.88 16.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/>
    <path d="M 345 60 L 375 60 Q 385 60 385 70 L 385 100 Q 385 110 395 110 L 418.63 110" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/>
    <path d="M 423.88 110 L 416.88 113.5 L 418.63 110 L 416.88 106.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/>
    <path d="M 285 90 L 285 100 Q 285 110 285 105 L 285 102.5 Q 285 100 285 106.82 L 285 113.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/>
    <path d="M 285 118.88 L 281.5 111.88 L 285 113.63 L 288.5 111.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/>
    <rect x="225" y="30" width="120" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 60px; margin-left: 226px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">
                                加锁的原子性
                <br/>
                <font color="#ff0080">
                                    过期时间
                </font>
                                + nx 的原子
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="285" y="64" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    加锁的原子性
 过期时间 + nx 的原子
        </text>
      </switch>
    </g>
    <path d="M 345 240 L 370 240 Q 380 240 380 230 L 380 200 Q 380 190 390 190 L 408.63 190" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/>
    <path d="M 413.88 190 L 406.88 193.5 L 408.63 190 L 406.88 186.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/>
    <path d="M 345 240 L 370 240 Q 380 240 380 250 L 380 270 Q 380 280 390 280 L 408.63 280" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/>
    <path d="M 413.88 280 L 406.88 283.5 L 408.63 280 L 406.88 276.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/>
    <path d="M 285 270 L 285 333.63" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="stroke"/>
    <path d="M 285 338.88 L 281.5 331.88 L 285 333.63 L 288.5 331.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/>
    <rect x="225" y="210" width="120" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 240px; margin-left: 226px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">
                                释放
                <font color="#ff0080">
                                    自己
                </font>
                                锁的原子性
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="285" y="244" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    释放自己锁的原子性
        </text>
      </switch>
    </g>
    <path d="M 345 370 L 391.13 370" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/>
    <path d="M 396.38 370 L 389.38 373.5 L 391.13 370 L 389.38 366.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/>
    <rect x="225" y="340" width="120" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 370px; margin-left: 226px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">
                                释放锁逻辑一定执行
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="285" y="374" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    释放锁逻辑一定执行
        </text>
      </switch>
    </g>
    <path d="M 345 716 L 357.5 716 Q 367.5 716 367.5 706 L 367.5 670 Q 367.5 660 375.57 660 L 383.63 660" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/>
    <path d="M 388.88 660 L 381.88 663.5 L 383.63 660 L 381.88 656.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/>
    <path d="M 345 716 L 358.8 716 Q 368.8 716 368.8 726 L 368.8 750 Q 368.8 760 377.47 760 L 386.13 760" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/>
    <path d="M 391.38 760 L 384.38 763.5 L 386.13 760 L 384.38 756.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/>
    <rect x="225" y="686" width="120" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 716px; margin-left: 226px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">
                                锁续期问题
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="285" y="720" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    锁续期问题
        </text>
      </switch>
    </g>
    <path d="M 345 903 L 360 903 Q 370 903 370 893 L 370 860 Q 370 850 379.32 850 L 388.63 850" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/>
    <path d="M 393.88 850 L 386.88 853.5 L 388.63 850 L 386.88 846.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/>
    <path d="M 345 903 L 360 903 Q 370 903 370 913 L 370 950 Q 370 960 379.32 960 L 388.63 960" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/>
    <path d="M 393.88 960 L 386.88 963.5 L 388.63 960 L 386.88 956.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/>
    <rect x="225" y="873" width="120" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 903px; margin-left: 226px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">
                                集群下锁丢失
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="285" y="907" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    集群下锁丢失
        </text>
      </switch>
    </g>
    <path d="M 545 20 L 593.63 20" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/>
    <path d="M 598.88 20 L 591.88 23.5 L 593.63 20 L 591.88 16.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/>
    <rect x="425" y="0" width="120" height="40" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="all"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 20px; margin-left: 426px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">
                                redis: setnxex
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="485" y="24" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    redis: setnxex
        </text>
      </switch>
    </g>
    <rect x="425" y="90" width="120" height="40" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="all"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 110px; margin-left: 426px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">
                                zk: create + 临时节点
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="485" y="114" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    zk: create + 临时节点
        </text>
      </switch>
    </g>
    <ellipse cx="285" cy="150" rx="60" ry="30" fill="#f8cecc" stroke="#b85450" pointer-events="all"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 150px; margin-left: 226px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">
                                过期时间为了防止节点挂了的死锁问题
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="285" y="154" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    过期时间为了防止节点挂了的死锁问题
        </text>
      </switch>
    </g>
    <rect x="415" y="170" width="150" height="40" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="all"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 148px; height: 1px; padding-top: 190px; margin-left: 416px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">
                                redis: lua{get/del} || 事务
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="490" y="194" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    redis: lua{get/del} || 事务
        </text>
      </switch>
    </g>
    <rect x="415" y="260" width="150" height="40" rx="6" ry="6" fill="#f5f5f5" stroke="#666666" pointer-events="all"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 148px; height: 1px; padding-top: 280px; margin-left: 416px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #333333; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">
                                zk: delete, 且删除的临时节点一定是自己的
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="490" y="284" fill="#333333" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    zk: delete, 且删除的临时节点一定是自己的
        </text>
      </switch>
    </g>
    <rect x="397.5" y="340" width="185" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 183px; height: 1px; padding-top: 370px; margin-left: 399px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">
                                代码层面一定要处理异常: finally
                <br/>
                                机器挂了的话会有过期时间兜底
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="490" y="374" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    代码层面一定要处理异常: finally...
        </text>
      </switch>
    </g>
    <path d="M 350 520 L 363.8 520 Q 373.8 520 373.8 510 L 373.8 470 Q 373.8 460 382.47 460 L 391.13 460" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/>
    <path d="M 396.38 460 L 389.38 463.5 L 391.13 460 L 389.38 456.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/>
    <path d="M 350 520 L 363.8 520 Q 373.8 520 373.8 530 L 373.8 555 Q 373.8 565 382.47 565 L 391.13 565" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/>
    <path d="M 396.38 565 L 389.38 568.5 L 391.13 565 L 389.38 561.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/>
    <path d="M 287.5 550 L 287.5 583.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/>
    <path d="M 287.5 588.88 L 284 581.88 L 287.5 583.63 L 291 581.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/>
    <path d="M 287.5 490 L 287.5 471.37" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/>
    <path d="M 287.5 466.12 L 291 473.12 L 287.5 471.37 L 284 473.12 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/>
    <rect x="225" y="490" width="125" height="60" rx="9" ry="9" fill="#f8cecc" stroke="#b85450" pointer-events="all"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 123px; height: 1px; padding-top: 520px; margin-left: 226px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">
                                释放锁之后通知问题
                <br/>
                <font color="#33ff33">
                                    代码
                </font>
                <font color="#ff0080">
                                    -- 心跳 -- watch
                </font>
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="288" y="524" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    释放锁之后通知问题
代码 -- 心跳 -- watch
        </text>
      </switch>
    </g>
    <rect x="390" y="630" width="185" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 183px; height: 1px; padding-top: 660px; margin-left: 391px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">
                                redis: redis本身做不了什么, 代码层面可以使用守护线程进行锁续期
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="483" y="664" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    redis: redis本身做不了什么, 代码层面可以使用守护线程进行锁续期
        </text>
      </switch>
    </g>
    <rect x="392.5" y="730" width="185" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 183px; height: 1px; padding-top: 760px; margin-left: 394px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">
                                zk： 没有该问题, 临时节点
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="485" y="764" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    zk： 没有该问题, 临时节点
        </text>
      </switch>
    </g>
    <path d="M 580 850 L 610 850 Q 620 850 620 840 L 620 805 Q 620 795 630 795 L 653.63 795" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/>
    <path d="M 658.88 795 L 651.88 798.5 L 653.63 795 L 651.88 791.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/>
    <path d="M 580 850 L 610.7 850 Q 620.7 850 620.7 860 L 620.7 867.5 Q 620.7 875 630.7 875 L 654.88 875" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/>
    <path d="M 660.13 875 L 653.13 878.5 L 654.88 875 L 653.13 871.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/>
    <rect x="395" y="820" width="185" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 183px; height: 1px; padding-top: 850px; margin-left: 396px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">
                                redis: redis sm 数据不是强一致的， 所以该问题无解
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="488" y="854" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    redis: redis sm 数据不是强一致的， 所以该问题无解
        </text>
      </switch>
    </g>
    <path d="M 580 960 L 656.13 960" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/>
    <path d="M 661.38 960 L 654.38 963.5 L 656.13 960 L 654.38 956.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/>
    <rect x="395" y="930" width="185" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 183px; height: 1px; padding-top: 960px; margin-left: 396px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">
                                zk: 数据一致性的同意视图可以避免该问题{放进去去任何客户端都可以取到}
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="488" y="964" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    zk: 数据一致性的同意视图可以避免该问题{放进去去任何客户端都可以取到}
        </text>
      </switch>
    </g>
    <rect x="225" y="1030" width="120" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 1060px; margin-left: 226px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">
                                锁重入
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="285" y="1064" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    锁重入
        </text>
      </switch>
    </g>
    <rect x="600" y="0" width="120" height="40" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="all"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 20px; margin-left: 601px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">
                                redis 的update和create 合并为了set
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="660" y="24" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    redis 的update和create 合并为了s...
        </text>
      </switch>
    </g>
    <ellipse cx="80" cy="280" rx="55" ry="30" fill="#d5e8d4" stroke="#82b366" pointer-events="all"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 108px; height: 1px; padding-top: 280px; margin-left: 26px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">
                <span>
                                    redis 快, 但是单点--sm--涉及了 IO
                </span>
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="80" y="284" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    redis 快, 但是单点--sm--涉及了 IO
        </text>
      </switch>
    </g>
    <path d="M 582.5 460 L 623.63 460" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/>
    <path d="M 628.88 460 L 621.88 463.5 L 623.63 460 L 621.88 456.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/>
    <rect x="397.5" y="430" width="185" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 183px; height: 1px; padding-top: 460px; margin-left: 399px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">
                                redis: 本身做不了这件事
                <br/>
                                代码上: 大家一起抢{写成递归-retry||redission的 block}
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="490" y="464" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    redis: 本身做不了这件事...
        </text>
      </switch>
    </g>
    <path d="M 590 565 L 623.64 565" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/>
    <path d="M 628.89 565 L 621.89 568.5 L 623.64 565 L 621.89 561.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/>
    <rect x="397.5" y="530" width="192.5" height="70" rx="10.5" ry="10.5" fill="#ffffff" stroke="#000000" pointer-events="all"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 191px; height: 1px; padding-top: 565px; margin-left: 399px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">
                <div style="text-align: left">
                  <span>
                                        zk: 基于watch + sequence 只会有下一个才会抢锁{callback}
                  </span>
                </div>
                <div style="text-align: left">
                                    -
                  <strike>
                                        所有节点都监听 lock 节点{释放锁瞬间产生大量callback来抢锁}
                  </strike>
                </div>
                <div style="text-align: left">
                  <span>
                                        - 每个节点只监听上一个节点
                  </span>
                </div>
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="494" y="569" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    zk: 基于watch + sequence 只会有下一个才会抢锁{callback...
        </text>
      </switch>
    </g>
    <path d="M 703.76 430 L 703.76 396.37" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/>
    <path d="M 703.76 391.12 L 707.26 398.12 L 703.76 396.37 L 700.26 398.12 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/>
    <rect x="630" y="430" width="147.5" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 146px; height: 1px; padding-top: 460px; margin-left: 631px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">
                                存在并发压力: 都在发请求redis成功响应的抢锁成功
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="704" y="464" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    存在并发压力: 都在发请求redis成功响应的抢锁成功
        </text>
      </switch>
    </g>
    <path d="M 703.8 595 L 703.8 605 Q 703.8 615 703.8 612.5 L 703.8 611.25 Q 703.8 610 703.8 616.82 L 703.8 623.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/>
    <path d="M 703.8 628.88 L 700.3 621.88 L 703.8 623.63 L 707.3 621.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/>
    <rect x="630.01" y="535" width="147.5" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 146px; height: 1px; padding-top: 565px; margin-left: 631px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">
                                不存在并发压力: 精准的下一个抢到, 其他线程block
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="704" y="569" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    不存在并发压力: 精准的下一个抢到, 其他线程block
        </text>
      </switch>
    </g>
    <path d="M 703.76 340 L 703.78 327.5 Q 703.8 317.5 713.8 317.5 L 735.6 317.5 Q 745.6 317.5 745.6 309.43 L 745.6 301.37" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/>
    <path d="M 745.6 296.12 L 749.1 303.12 L 745.6 301.37 L 742.1 303.12 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/>
    <path d="M 703.76 340 L 703.78 327.5 Q 703.8 317.5 693.8 317.5 L 677.2 317.5 Q 667.2 317.5 667.2 309.43 L 667.2 301.37" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/>
    <path d="M 667.2 296.12 L 670.7 303.12 L 667.2 301.37 L 663.7 303.12 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/>
    <ellipse cx="703.76" cy="365" rx="63.125" ry="25" fill="#e1d5e7" stroke="#9673a6" pointer-events="all"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 124px; height: 1px; padding-top: 365px; margin-left: 642px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">
                                1. 查redis, 有就返回
                <br/>
                                2.没有才会出现锁竞争
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="704" y="369" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    1. 查redis, 有就返回...
        </text>
      </switch>
    </g>
    <path d="M 777.5 277.5 L 808.8 277.5 Q 818.8 277.5 818.8 287.5 L 818.8 395 Q 818.8 405 828.8 405 L 853.63 405" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/>
    <path d="M 858.88 405 L 851.88 408.5 L 853.63 405 L 851.88 401.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/>
    <path d="M 723.74 268.75 L 728.74 264.38 Q 733.74 260 743.74 260 L 750.62 260 Q 757.5 260 765.03 266.59 L 771.26 272.04 Q 777.5 277.5 769.97 284.09 L 763.74 289.54 Q 757.5 295 747.5 295 L 740.62 295 Q 733.74 295 726.21 288.41 L 719.98 282.96 Q 713.74 277.5 718.74 273.13 Z" fill="#f8cecc" stroke="#b85450" stroke-miterlimit="10" pointer-events="all"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 62px; height: 1px; padding-top: 278px; margin-left: 715px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">
                                DCL
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="746" y="281" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    DCL
        </text>
      </switch>
    </g>
    <rect x="860" y="100" width="430" height="610" rx="8.6" ry="8.6" fill="#f5f5f5" stroke="#666666" pointer-events="all"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 428px; height: 1px; padding-top: 405px; margin-left: 862px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: left; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #333333; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">
                <div>
                                    // dcl:
                  <font color="#ff0080">
                                        redis 中没有执行获取lock之后马上就去查询 redis
                  </font>
                  <span>
                    <br/>
                  </span>
                </div>
                <div>
                  <span>
                                        private Map getFromDbWithDistributeLockV4() {
                  </span>
                  <br/>
                </div>
                <div>
                                    // 1. 占分布式锁:
                </div>
                <div>
                                    String uuid = UUID.fastUUID().toString();
                </div>
                <div>
                                    Boolean lock = redisTemplate.opsForValue()
                </div>
                <div>
                  <span style="white-space: pre">
                    <span style="white-space: pre">
                    </span>
                  </span>
                                    .setIfAbsent(REDIS_LOCK_KEY, uuid, 30, TimeUnit.SECONDS);
                </div>
                <div>
                                    if (lock) {
                </div>
                <div>
                                    Map brands = getFromDB();  // 查询 redis
                </div>
                <div>
                                    // 2. set redis value
                </div>
                <div>
                                    redisUtil.set(brands, BRANDS_KEY, 2, TimeUnit.HOURS);
                </div>
                <div>
                                    // 3. 删除分布式锁: 只能删除自己的锁, 且原子
                </div>
                <div>
                                    String script = "if redis.call('get',KEYS[1]) == ARGV[1] then
                </div>
                <div>
                  <span style="white-space: pre">
                  </span>
                  <span style="white-space: pre">
                  </span>
                                    return redis.call('del',KEYS[1]) else return 0 end";
                </div>
                <div>
                  <span style="white-space: pre">
                  </span>
                                    new DefaultRedisScript&lt;&gt;(script, Object.class);
                </div>
                <div>
                                    Object delete = redisTemplate.execute
                </div>
                <div>
                  <span style="white-space: pre">
                  </span>
                  <span style="white-space: pre">
                  </span>
                                    (defaultRedisScript, Arrays.asList(REDIS_LOCK_KEY), uuid);
                </div>
                <div>
                                    return brands;
                </div>
                <div>
                                    }
                </div>
                <div>
                  <br/>
                </div>
                <div>
                                    TimeUnit.MINUTES.sleep(100);
                </div>
                <div>
                                    return getFromDbWithDistributeLockV4();
                </div>
                <div>
                                    }
                </div>
                <div>
                  <br/>
                </div>
                <div>
                                    private Map getWithLock() {
                </div>
                <div>
                                    // 1. 获取分布式锁, 名字相同即为一把锁
                </div>
                <div>
                                    RLock lock = redissonClient.getLock(REDIS_DISTRIBUTE_LOCK_KEY);
                </div>
                <div>
                                    lock.lock(); // 阻塞等待 + while(true) 获取锁
                </div>
                <div>
                                    Map brands;
                </div>
                <div>
                                    try {
                </div>
                <div>
                                    brands = redisUtil.get(BRANDS_KEY);
                </div>
                <div>
                                    if (ObjectUtil.isNotNull(brands)) {
                </div>
                <div>
                                    return brands;
                </div>
                <div>
                                    }
                </div>
                <div>
                                    brands = getFromDB(true);
                </div>
                <div>
                                    redisUtil.set(brands, BRANDS_KEY, 2, TimeUnit.HOURS);
                </div>
                <div>
                                    } finally {
                </div>
                <div>
                                    lock.unlock();
                </div>
                <div>
                                    }
                </div>
                <div>
                  <br/>
                </div>
                <div>
                                    return brands;
                </div>
                <div>
                                    }
                </div>
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="862" y="409" fill="#333333" font-family="Helvetica" font-size="12px">
                    // dcl: redis 中没有执行获取lock之后马上就去查询 redis...
        </text>
      </switch>
    </g>
    <path d="M 244.06 598.75 L 249.06 594.38 Q 254.06 590 264.06 590 L 310.94 590 Q 320.94 590 328.47 596.59 L 334.7 602.04 Q 340.94 607.5 333.41 614.09 L 327.18 619.54 Q 320.94 625 310.94 625 L 264.06 625 Q 254.06 625 246.53 618.41 L 240.3 612.96 Q 234.06 607.5 239.06 603.13 Z" fill="#e1d5e7" stroke="#9673a6" stroke-miterlimit="10" pointer-events="all"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 105px; height: 1px; padding-top: 608px; margin-left: 235px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">
                                心跳: 延迟+ 压力
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="288" y="611" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    心跳: 延迟+ 压力
        </text>
      </switch>
    </g>
    <path d="M 240 431.25 L 245 425.63 Q 250 420 260 420 L 315 420 Q 325 420 331.64 427.47 L 338.36 435.03 Q 345 442.5 338.36 449.97 L 331.64 457.53 Q 325 465 315 465 L 260 465 Q 250 465 243.36 457.53 L 236.64 449.97 Q 230 442.5 235 436.88 Z" fill="#e1d5e7" stroke="#9673a6" stroke-miterlimit="10" pointer-events="all"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 113px; height: 1px; padding-top: 443px; margin-left: 231px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">
                                代码主动问redis
                <br/>
                                zk 靠callback实现
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="288" y="446" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    代码主动问redis...
        </text>
      </switch>
    </g>
    <rect x="630" y="630" width="147.5" height="60" rx="9" ry="9" fill="#d5e8d4" stroke="#82b366" pointer-events="all"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 146px; height: 1px; padding-top: 660px; margin-left: 631px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">
                                中间某个节点挂了, 会产生事件, 下一个接收到事件, 去watch 挂了的前一个, 如果是第一个则获取锁
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="704" y="664" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    中间某个节点挂了, 会产生事件, 下一个接收到事件, 去watch 挂了的前一个, 如果是第一个则获取锁
        </text>
      </switch>
    </g>
    <path d="M 10 533.13 L 15 526.56 Q 20 520 30 520 L 130 520 Q 140 520 146.06 527.95 L 153.94 538.3 Q 160 546.25 153.94 554.2 L 146.06 564.55 Q 140 572.5 130 572.5 L 30 572.5 Q 20 572.5 13.94 564.55 L 6.06 554.2 Q 0 546.25 5 539.69 Z" fill="#ffe6cc" stroke="#d79b00" stroke-miterlimit="10" pointer-events="all"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 158px; height: 1px; padding-top: 546px; margin-left: 1px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">
                                超高并发下, 可以将一个 key 拆成多个让 redis 去抗并发
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="80" y="550" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    超高并发下, 可以将一个 key 拆成多个让 redis 去抗并发
        </text>
      </switch>
    </g>
    <path d="M 640 261.25 L 645 255.63 Q 650 250 660 250 L 674.39 250 Q 684.39 250 691.03 257.47 L 697.75 265.03 Q 704.39 272.5 697.75 279.97 L 691.03 287.53 Q 684.39 295 674.39 295 L 660 295 Q 650 295 643.36 287.53 L 636.64 279.97 Q 630 272.5 635 266.88 Z" fill="#d5e8d4" stroke="#82b366" stroke-miterlimit="10" pointer-events="all"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 72px; height: 1px; padding-top: 273px; margin-left: 631px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">
                                没抢到锁
                <br/>
                                业务上失败
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="667" y="276" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    没抢到锁
业务上失败
        </text>
      </switch>
    </g>
    <ellipse cx="710" cy="795" rx="50" ry="25" fill="#ffffff" stroke="#000000" pointer-events="all"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 98px; height: 1px; padding-top: 795px; margin-left: 661px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">
                                redis sm 是 AP
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="710" y="799" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    redis sm 是 AP
        </text>
      </switch>
    </g>
    <ellipse cx="711.25" cy="960" rx="48.75" ry="25" fill="#ffffff" stroke="#000000" pointer-events="all"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 96px; height: 1px; padding-top: 960px; margin-left: 664px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">
                                zk: CP
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="711" y="964" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    zk: CP
        </text>
      </switch>
    </g>
    <path d="M 761.25 875 L 790.7 875 Q 800.7 875 810.7 875.11 L 833.68 875.37" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/>
    <path d="M 838.93 875.43 L 831.89 878.85 L 833.68 875.37 L 831.97 871.85 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/>
    <ellipse cx="711.25" cy="875" rx="50" ry="25" fill="#ffffff" stroke="#000000" pointer-events="all"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 98px; height: 1px; padding-top: 875px; margin-left: 662px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">
                                redlock 可以解决
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="711" y="879" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    redlock 可以解决
        </text>
      </switch>
    </g>
    <path d="M 840 824 C 840 824 840 824 840 824 M 840 824 C 840 824 840 824 840 824 M 839.94 833.22 C 842.57 830.12 844.74 827.67 847.81 824.16 M 839.94 833.22 C 842.6 829.54 845.32 827.19 847.81 824.16 M 839.87 842.44 C 843.81 836.75 847.36 834.9 855.62 824.33 M 839.87 842.44 C 843.79 838.56 847.08 833.61 855.62 824.33 M 839.81 851.66 C 849.27 841.66 853.45 834.45 864.08 823.73 M 839.81 851.66 C 848.08 841.96 856.71 832.5 864.08 823.73 M 839.74 860.88 C 848.18 852.19 855.64 841.75 871.89 823.9 M 839.74 860.88 C 852.96 846.47 864.43 832 871.89 823.9 M 839.68 870.1 C 855.68 853.17 869.65 836.91 879.7 824.06 M 839.68 870.1 C 849.8 858.51 860.04 846.67 879.7 824.06 M 840.27 878.56 C 851.68 863.6 863.13 850.06 887.51 824.22 M 840.27 878.56 C 859.07 857.3 877.42 837.58 887.51 824.22 M 840.21 887.78 C 859.43 864.13 883.69 841.85 895.97 823.63 M 840.21 887.78 C 858.23 867.98 875.32 848.15 895.97 823.63 M 840.14 897 C 854.72 879.97 871.04 859.93 903.78 823.79 M 840.14 897 C 854.29 880.97 870.34 863.2 903.78 823.79 M 840.08 906.22 C 864.45 880.64 884.13 855.24 911.59 823.96 M 840.08 906.22 C 866.96 873.86 894.34 842.94 911.59 823.96 M 840.67 914.68 C 864.74 885.38 891.7 853.13 919.4 824.12 M 840.67 914.68 C 872.85 879.16 903.51 844.13 919.4 824.12 M 848.48 914.85 C 867.49 892.32 888.67 869.46 927.21 824.28 M 848.48 914.85 C 878.35 881.06 909.6 845.26 927.21 824.28 M 856.94 914.25 C 881.83 885.45 905.93 857.24 935.67 823.69 M 856.94 914.25 C 880.29 887.06 904.44 858.19 935.67 823.69 M 864.75 914.42 C 885.83 889.02 907.35 867.97 943.48 823.85 M 864.75 914.42 C 884.46 891.93 904.85 866.74 943.48 823.85 M 872.56 914.58 C 903.57 879.77 931.33 849.03 951.29 824.02 M 872.56 914.58 C 891.5 892.01 911.01 870.02 951.29 824.02 M 880.37 914.74 C 909.27 880.25 940.17 845.26 959.1 824.18 M 880.37 914.74 C 900.35 891.22 920.86 867.26 959.1 824.18 M 888.18 914.91 C 911.18 886.94 934.7 859.14 966.91 824.34 M 888.18 914.91 C 907.72 893.07 927 869.91 966.91 824.34 M 896.64 914.31 C 915.94 894.07 934.57 872.14 975.37 823.75 M 896.64 914.31 C 913.97 893 931.63 872.8 975.37 823.75 M 904.45 914.48 C 933.51 882.72 962.92 846.51 983.18 823.91 M 904.45 914.48 C 935.3 878.83 965.83 844.54 983.18 823.91 M 912.26 914.64 C 929.88 896.78 943.84 877.06 990.99 824.07 M 912.26 914.64 C 934.39 888.26 958.55 862.43 990.99 824.07 M 920.07 914.8 C 938.69 892.04 955.67 871.97 998.8 824.24 M 920.07 914.8 C 944.95 886.95 970.48 857.73 998.8 824.24 M 927.88 914.97 C 951.92 887.3 971.6 864.04 1007.26 823.65 M 927.88 914.97 C 946.01 894.29 963.6 872.95 1007.26 823.65 M 936.34 914.37 C 965.01 881.62 994.67 849.1 1015.07 823.81 M 936.34 914.37 C 960.73 888.1 985.07 860.83 1015.07 823.81 M 944.15 914.54 C 970.24 885.04 997.08 854.34 1022.88 823.97 M 944.15 914.54 C 964.86 889.58 985.8 867.11 1022.88 823.97 M 951.96 914.7 C 975.64 888.47 996.6 862.65 1030.69 824.13 M 951.96 914.7 C 982.48 878.62 1012.47 842.88 1030.69 824.13 M 959.77 914.86 C 985.56 882.99 1013.94 852.43 1038.49 824.3 M 959.77 914.86 C 980.93 890.58 1002.13 868.18 1038.49 824.3 M 968.23 914.27 C 991.96 884.97 1020.2 855.72 1046.96 823.7 M 968.23 914.27 C 989.75 890.05 1010.29 865.11 1046.96 823.7 M 976.04 914.43 C 1004.68 880.66 1029.97 851.95 1054.77 823.87 M 976.04 914.43 C 1004.35 881.3 1033.39 847.86 1054.77 823.87 M 983.85 914.6 C 1005.14 892.69 1023.6 869.29 1062.58 824.03 M 983.85 914.6 C 1013.18 881.03 1042.92 847.35 1062.58 824.03 M 991.66 914.76 C 1011.8 894.2 1027.59 871.97 1070.38 824.19 M 991.66 914.76 C 1017.96 883.64 1044.35 853.18 1070.38 824.19 M 999.47 914.92 C 1018.96 895.98 1033.9 874.28 1078.19 824.36 M 999.47 914.92 C 1017.38 895.3 1032.55 875.89 1078.19 824.36 M 1007.93 914.33 C 1039.25 878.91 1069.6 844.29 1086.66 823.76 M 1007.93 914.33 C 1025.57 893.65 1042.98 873.45 1086.66 823.76 M 1015.74 914.49 C 1039.33 890.01 1061.39 864.9 1094.47 823.93 M 1015.74 914.49 C 1032.25 895.32 1048.07 877.09 1094.47 823.93 M 1023.55 914.65 C 1044.71 890.71 1061.39 867.79 1098.99 827.86 M 1023.55 914.65 C 1045.62 888.22 1067.33 863.23 1098.99 827.86 M 1031.36 914.82 C 1060.6 883.59 1087.08 847.39 1103.52 831.8 M 1031.36 914.82 C 1051.3 893.37 1069.59 872.23 1103.52 831.8 M 1039.16 914.98 C 1065.84 884.02 1089.48 857.68 1103.46 841.02 M 1039.16 914.98 C 1057.47 892.72 1077.23 872.57 1103.46 841.02 M 1047.63 914.39 C 1063.68 896.43 1076.04 880.69 1103.39 850.24 M 1047.63 914.39 C 1059.37 900.71 1072.9 885.58 1103.39 850.24 M 1055.44 914.55 C 1074.96 893.66 1091.67 875.63 1103.33 859.46 M 1055.44 914.55 C 1073.88 894.54 1093.26 873.59 1103.33 859.46 M 1063.25 914.71 C 1078.23 897.61 1089.83 884.78 1103.27 868.68 M 1063.25 914.71 C 1080.04 896.42 1095.71 877.42 1103.27 868.68 M 1071.05 914.88 C 1080.34 903.59 1087.56 896.09 1103.2 877.9 M 1071.05 914.88 C 1078.01 906.05 1086.79 898.63 1103.2 877.9 M 1079.52 914.29 C 1087.39 906.57 1096.99 895.97 1103.14 887.12 M 1079.52 914.29 C 1085.55 908.27 1090.92 902.52 1103.14 887.12 M 1087.33 914.45 C 1090 908.94 1095.45 906.93 1103.07 896.33 M 1087.33 914.45 C 1092.51 908.69 1097.55 903.36 1103.07 896.33 M 1095.14 914.61 C 1098.93 911.74 1100.39 907.69 1103.67 904.8 M 1095.14 914.61 C 1096.56 912.15 1098.6 910.15 1103.67 904.8" fill="none" stroke="#fff2cc" stroke-linejoin="round" stroke-linecap="round" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 840 824 M 840 824 C 911.12 821.15 985.22 821.38 1095 824 M 840 824 C 927.7 824.62 1016.62 824.83 1095 824 M 1095 824 C 1096.13 826.2 1098.68 828.12 1100 829 M 1095 824 C 1096.06 825.22 1097.01 826.06 1100 829 M 1100 829 C 1101.64 857.38 1099.28 881.18 1100 914 M 1100 829 C 1099.52 858.02 1099.64 887.98 1100 914 M 1100 914 C 1021.17 914.38 939.65 916.17 840 914 M 1100 914 C 1018.98 912.15 938.36 911.56 840 914 M 840 914 C 840.1 886.8 840.41 861.22 840 824 M 840 914 C 841.1 882.16 841.13 848.79 840 824 M 840 824 C 840 824 840 824 840 824 M 840 824 C 840 824 840 824 840 824" fill="none" stroke="#d6b656" stroke-width="1.5" stroke-linejoin="round" stroke-linecap="round" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 1095 824 M 1095 824 C 1094.97 825.46 1094.89 825.68 1095 829 M 1095 824 C 1095.03 826.2 1094.9 828.12 1095 829 M 1095 829 C 1096.67 828.93 1098.13 829.12 1100 829 M 1095 829 C 1096.74 828.77 1098.48 829.12 1100 829" fill="none" stroke="#d6b656" stroke-width="1.5" stroke-linejoin="round" stroke-linecap="round" stroke-miterlimit="10" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 258px; height: 1px; padding-top: 869px; margin-left: 841px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: #666600; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                <div style="color: rgb(0 , 0 , 0) ; font-size: 12px ; text-align: left">
                                    1. redlock 下所有节点是对等的, 没有 SM 概念
                </div>
                <div style="color: rgb(0 , 0 , 0) ; font-size: 12px ; text-align: left">
                                    2. client 会向多个节点发, 半数以上同意才成功
                </div>
                <div style="color: rgb(0 , 0 , 0) ; font-size: 12px ; text-align: left">
                                    3. 性能不如 redis 单机版的高
                </div>
                <div style="color: rgb(0 , 0 , 0) ; font-size: 12px ; text-align: left">
                                    4. 涉及锁回滚的问题
                </div>
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="970" y="873" fill="#666600" font-family="Helvetica" font-size="14px" text-anchor="middle">
                    1. redlock 下所有节点是对等的, 没有 SM 概念...
        </text>
      </switch>
    </g>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 824px; margin-left: 960px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: nowrap; ">
                <font color="#ff0080">
                                    很少使用
                </font>
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="960" y="828" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    很少使用
        </text>
      </switch>
    </g>
    <rect x="395" y="1320" width="185" height="50" rx="7.5" ry="7.5" fill="#ffffff" stroke="#000000" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 183px; height: 1px; padding-top: 1345px; margin-left: 396px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                                实际使用中: 全局分布式锁&amp;用户界别的分布式锁
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="488" y="1349" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    实际使用中: 全局分布式锁&amp;用户界别的分布式锁
        </text>
      </switch>
    </g>
    <rect x="395" y="1240" width="182.5" height="50" rx="7.5" ry="7.5" fill="#ffffff" stroke="#000000" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 181px; height: 1px; padding-top: 1265px; margin-left: 396px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                                java 中 STW 是 redis续期问题， zk 临时节点会不存在(心跳)
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="486" y="1269" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    java 中 STW 是 redis续期问题， zk 临时节点会不存在(心跳)
        </text>
      </switch>
    </g>
    <path d="M 350 1305 L 362.5 1305 Q 372.5 1305 372.5 1295 L 372.5 1275 Q 372.5 1265 380.57 1265 L 388.63 1265" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 393.88 1265 L 386.88 1268.5 L 388.63 1265 L 386.88 1261.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 350 1305 L 362.5 1305 Q 372.5 1305 372.5 1315 L 372.5 1335 Q 372.5 1345 380.57 1345 L 388.63 1345" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 393.88 1345 L 386.88 1348.5 L 388.63 1345 L 386.88 1341.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <rect x="225" y="1280" width="125" height="50" rx="7.5" ry="7.5" fill="#ffffff" stroke="#000000" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 123px; height: 1px; padding-top: 1305px; margin-left: 226px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                                其他
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="288" y="1309" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    其他
        </text>
      </switch>
    </g>
    <path d="M 350 1175 L 361.3 1175 Q 371.3 1175 371.3 1165 L 371.3 1155 Q 371.3 1145 378.72 1145 L 386.13 1145" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 391.38 1145 L 384.38 1148.5 L 386.13 1145 L 384.38 1141.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 350 1175 L 361.3 1175 Q 371.3 1175 371.3 1185 L 371.3 1190 Q 371.3 1195 378.72 1195 L 386.13 1195" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 391.38 1195 L 384.38 1198.5 L 386.13 1195 L 384.38 1191.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <rect x="225" y="1150" width="125" height="50" rx="7.5" ry="7.5" fill="#ffffff" stroke="#000000" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 123px; height: 1px; padding-top: 1175px; margin-left: 226px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                                框架(java)
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="288" y="1179" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    框架(java)
        </text>
      </switch>
    </g>
    <rect x="392.5" y="1130" width="180" height="30" rx="4.5" ry="4.5" fill="#ffffff" stroke="#000000" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 178px; height: 1px; padding-top: 1145px; margin-left: 394px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                                redis: redission
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="483" y="1149" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    redis: redission
        </text>
      </switch>
    </g>
    <rect x="392.5" y="1180" width="180" height="30" rx="4.5" ry="4.5" fill="#ffffff" stroke="#000000" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 178px; height: 1px; padding-top: 1195px; margin-left: 394px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                                zk: curator
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="483" y="1199" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    zk: curator
        </text>
      </switch>
    </g>
  </g>
  <switch>
    <g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/>
    <a transform="translate(0,-5)" xlink:href="https://www.diagrams.net/doc/faq/svg-export-text-problems" target="_blank">
      <text text-anchor="middle" font-size="10px" x="50%" y="100%">
                Viewer does not support full SVG 1.1
      </text>
    </a>
  </switch>
</svg>
