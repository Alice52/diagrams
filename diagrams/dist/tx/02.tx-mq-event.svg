<svg host="65bd71144e"
  xmlns="http://www.w3.org/2000/svg"
  xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="770px" height="861px" viewBox="-0.5 -0.5 770 861" content="&lt;mxfile&gt;&lt;diagram id=&quot;Xpbpm1wv82t_yM4CTfCD&quot; name=&quot;Page-1&quot;&gt;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&lt;/diagram&gt;&lt;/mxfile&gt;">
  <defs/>
  <g>
    <rect x="439" y="200" width="330" height="350" rx="9.9" ry="9.9" fill="#d5e8d4" stroke="#82b366" pointer-events="none"/>
    <path d="M 579 480 L 742 480 L 749 487 L 749 501 L 579 501 L 579 480 Z" fill="#fff2cc" stroke="#d6b656" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 742 480 L 742 487 L 749 487" fill="none" stroke="#d6b656" stroke-miterlimit="10" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 168px; height: 1px; padding-top: 491px; margin-left: 580px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: #666600; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                <div>
                  <span style="font-size: 10px ; color: rgb(255 , 0 , 128)">
                                        事件表+异步消费事件+job fallback
                  </span>
                </div>
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="664" y="495" fill="#666600" font-family="Helvetica" font-size="14px" text-anchor="middle">
                    事件表+异步消费事件+job fallback
        </text>
      </switch>
    </g>
    <rect x="679" y="395" width="90" height="40" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 88px; height: 1px; padding-top: 415px; margin-left: 680px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                                插入事件表
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="724" y="419" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    插入事件表
        </text>
      </switch>
    </g>
    <path d="M 545 415 L 672.63 415" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 677.88 415 L 670.88 418.5 L 672.63 415 L 670.88 411.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 415px; margin-left: 607px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">
                                3-2状态为已接收
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="607" y="419" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">
                    3-2状态为已接收
        </text>
      </switch>
    </g>
    <rect x="465" y="395" width="80" height="40" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 78px; height: 1px; padding-top: 415px; margin-left: 466px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                                监听消费
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="505" y="419" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    监听消费
        </text>
      </switch>
    </g>
    <path d="M 699 263.5 C 683 263.5 679 276 691.8 278.5 C 679 284 693.4 296 703.8 291 C 711 301 735 301 743 291 C 759 291 759 281 749 276 C 759 266 743 256 729 261 C 719 253.5 703 253.5 699 263.5 Z" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 78px; height: 1px; padding-top: 276px; margin-left: 680px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                                分布式
                <br/>
                                定时任务
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="719" y="280" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    分布式
 定时任务
        </text>
      </switch>
    </g>
    <path d="M 724 395 Q 724 348.03 723.13 304.87" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 723.02 299.62 L 726.66 306.55 L 723.13 304.87 L 719.66 306.69 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 353px; margin-left: 723px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">
                                4-1 读取已接收
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="723" y="357" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">
                    4-1 读取已接收
        </text>
      </switch>
    </g>
    <path d="M 505 301 Q 505.03 348.03 614.52 348.03 Q 724 348.03 724 388.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 724 393.88 L 720.5 386.88 L 724 388.63 L 727.5 386.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 349px; margin-left: 585px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">
                                4-3 改状态为已处理
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="585" y="353" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">
                    4-3 改状态为已处理
        </text>
      </switch>
    </g>
    <rect x="460" y="261" width="90" height="40" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 88px; height: 1px; padding-top: 281px; margin-left: 461px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                                更新订单
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="505" y="285" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    更新订单
        </text>
      </switch>
    </g>
    <path d="M 679 276.03 Q 614.48 276.03 614.48 278.52 Q 614.48 281 556.37 281" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 551.12 281 L 558.12 277.5 L 556.37 281 L 558.12 284.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 277px; margin-left: 615px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">
                                4-2 执行本地业务
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="615" y="280" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">
                    4-2 执行本地业务
        </text>
      </switch>
    </g>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 220px; margin-left: 719px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: nowrap; ">
                <font color="#ff0080">
                                    订单系统
                </font>
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="719" y="224" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    订单系统
        </text>
      </switch>
    </g>
    <rect x="50" y="200" width="330" height="350" rx="9.9" ry="9.9" fill="#dae8fc" stroke="#6c8ebf" pointer-events="none"/>
    <rect x="90" y="250" width="120" height="40" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 270px; margin-left: 91px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                                1-1 更新支付流水表
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="150" y="274" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    1-1 更新支付流水表
        </text>
      </switch>
    </g>
    <rect x="250" y="350" width="120" height="40" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 370px; margin-left: 251px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                                1-2 插入事件表
                <br/>
                                type-relativeid-status
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="310" y="374" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    1-2 插入事件表...
        </text>
      </switch>
    </g>
    <path d="M 210 270 L 300 270.03 Q 310 270.03 310 280.03 L 310 343.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 310 348.88 L 306.5 341.88 L 310 343.63 L 313.5 341.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 102 395 L 101 395 Q 100 395 100 385 L 100 377.52 Q 100 370.03 110 370.03 L 243.63 370" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 248.88 370 L 241.88 373.5 L 243.63 370 L 241.88 366.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 370px; margin-left: 126px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">
                                2-1查询new状态的时间发布
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="126" y="374" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">
                    2-1查询new状态的时间发布
        </text>
      </switch>
    </g>
    <path d="M 90 402.5 C 74 402.5 70 415 82.8 417.5 C 70 423 84.4 435 94.8 430 C 102 440 126 440 134 430 C 150 430 150 420 140 415 C 150 405 134 395 120 400 C 110 392.5 94 392.5 90 402.5 Z" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 78px; height: 1px; padding-top: 415px; margin-left: 71px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                                分布式
                <br/>
                                定时任务
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="110" y="419" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    分布式
 定时任务
        </text>
      </switch>
    </g>
    <path d="M 120 470 L 283 470 L 290 477 L 290 540 L 120 540 L 120 470 Z" fill="#fff2cc" stroke="#d6b656" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 283 470 L 283 477 L 290 477" fill="none" stroke="#d6b656" stroke-miterlimit="10" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 168px; height: 1px; padding-top: 505px; margin-left: 122px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: left; ">
              <div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: #666600; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                <font style="font-size: 10px">
                                    1. 可没有事件表+同步去MQ: 回滚
                  <br/>
                                    2. 1-2 直接结束, 就会导致消费的延迟
                  <br/>
                                    3.
                  <font color="#ff0080" style="font-size: 10px">
                                        事件表+异步MQ+job fallback
                    <br/>
                  </font>
                                    - 出问题要看两份log: job+async
                  <br/>
                </font>
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="122" y="509" fill="#666600" font-family="Helvetica" font-size="14px">
                    1. 可没有事件表+同步去MQ: 回滚...
        </text>
      </switch>
    </g>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 220px; margin-left: 340px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: nowrap; ">
                <font color="#ff0080">
                                    支付系统
                </font>
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="340" y="224" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    支付系统
        </text>
      </switch>
    </g>
    <rect x="170" y="5" width="520" height="60" rx="9" ry="9" fill="#ffe6cc" stroke="#d79b00" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 518px; height: 1px; padding-top: 35px; margin-left: 171px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                                分布式事务解决方案-MQ+Event:
                <font color="#ff0080">
                                    不适合数据量特别大的情况
                </font>
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="430" y="39" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    分布式事务解决方案-MQ+Event: 不适合数据量特别大的情况
        </text>
      </switch>
    </g>
    <path d="M 65 70 L 65 106.48" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 65 111.73 L 61.5 104.73 L 65 106.48 L 68.5 104.73 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 0 0 L 119 0 L 130 11 L 130 70 L 0 70 L 0 0 Z" fill="#fff2cc" stroke="#d6b656" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 119 0 L 119 11 L 130 11" fill="none" stroke="#d6b656" stroke-miterlimit="10" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 128px; height: 1px; padding-top: 35px; margin-left: 1px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: #666600; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                <font style="font-size: 12px">
                                    支付接口回调系统:
                  <br/>
                                    1. 更新流水
                  <br/>
                                    2. 更新订单
                </font>
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="65" y="39" fill="#666600" font-family="Helvetica" font-size="14px" text-anchor="middle">
                    支付接口回调系统:...
        </text>
      </switch>
    </g>
    <path d="M 65 160 L 65.03 260.03 Q 65.03 270.03 74.33 270.02 L 83.63 270.01" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 88.88 270 L 81.89 273.51 L 83.63 270.01 L 81.88 266.51 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 45 122.5 C 29 122.5 25 135 37.8 137.5 C 25 143 39.4 155 49.8 150 C 57 160 81 160 89 150 C 105 150 105 140 95 135 C 105 125 89 115 75 120 C 65 112.5 49 112.5 45 122.5 Z" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 78px; height: 1px; padding-top: 135px; margin-left: 26px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                                数据入库
                <br/>
                                job 更新
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="65" y="139" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    数据入库
job 更新
        </text>
      </switch>
    </g>
    <rect x="340" y="650" width="110" height="40" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 108px; height: 1px; padding-top: 670px; margin-left: 341px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                                MQ{死信}
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="395" y="674" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    MQ{死信}
        </text>
      </switch>
    </g>
    <path d="M 10 740 L 299 740 L 310 751 L 310 860 L 10 860 L 10 740 Z" fill="#fff2cc" stroke="#d6b656" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 299 740 L 299 751 L 310 751" fill="none" stroke="#d6b656" stroke-miterlimit="10" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 298px; height: 1px; padding-top: 800px; margin-left: 11px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: #666600; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                <div style="text-align: left">
                  <span style="font-size: 12px">
                                        1. 每个数字开头都是一个原子操作
                  </span>
                </div>
                <div style="text-align: left">
                  <span style="font-size: 12px">
                                        2. 2-x 向MQ中发布消息可能出现不是原子op
                  </span>
                </div>
                <div style="text-align: left">
                  <span style="font-size: 12px">
                                        - 发送到MQ中但是超时了, 事务回滚{消息无法回滚}
                  </span>
                </div>
                <div style="text-align: left">
                  <span style="font-size: 12px">
                                        - 数据量大可以迁移到历史表中
                  </span>
                </div>
                <span style="font-size: 12px">
                  <div style="text-align: left">
                    <span>
                                            3. 事件表的作用: 可以看出有多少没处理的， 系统压力
                    </span>
                  </div>
                  <div style="text-align: left">
                    <span>
                                            4. 3-x 的消费需要保证幂等: 事件ID
                    </span>
                  </div>
                  <div style="text-align: left">
                    <span>
                                            - ack 有可能在mq中成功但是返回超时
                    </span>
                  </div>
                </span>
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="160" y="804" fill="#666600" font-family="Helvetica" font-size="14px" text-anchor="middle">
                    1. 每个数字开头都是一个原子操作...
        </text>
      </switch>
    </g>
    <path d="M 525 435 L 525.03 660.03 Q 525.03 670.03 515.03 670.03 L 456.37 670" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 451.12 670 L 458.12 666.5 L 456.37 670 L 458.12 673.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 506px; margin-left: 526px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">
                                3-3 ack
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="526" y="509" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">
                    3-3 ack
        </text>
      </switch>
    </g>
    <path d="M 395 650 Q 395.03 542.52 450.03 542.52 Q 505.03 542.52 505 441.37" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 505 436.12 L 508.5 443.12 L 505 441.37 L 501.5 443.12 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 530px; margin-left: 481px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">
                                3-1 监听消费
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="481" y="533" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">
                    3-1 监听消费
        </text>
      </switch>
    </g>
    <path d="M 395 650 Q 395.03 520.03 352.52 520.03 Q 310 520.03 310 396.37" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 310 391.12 L 313.5 398.12 L 310 396.37 L 306.5 398.12 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 518px; margin-left: 352px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">
                                2-2修改状态为已发送
                <br/>
                                rmq 在callback 中修改
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="352" y="522" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">
                    2-2修改状态为已发送...
        </text>
      </switch>
    </g>
    <path d="M 108.32 440.35 L 108.28 660.03 Q 108.28 670.03 118.28 670.03 L 333.63 670" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 338.88 670 L 331.88 673.5 L 333.63 670 L 331.88 666.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 670px; margin-left: 190px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">
                                2-3发送给MQ
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="190" y="674" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">
                    2-3发送给MQ
        </text>
      </switch>
    </g>
    <path d="M 460 740 L 749 740 L 760 751 L 760 860 L 460 860 L 460 740 Z" fill="#fff2cc" stroke="#d6b656" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 749 740 L 749 751 L 760 751" fill="none" stroke="#d6b656" stroke-miterlimit="10" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 298px; height: 1px; padding-top: 800px; margin-left: 462px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: left; ">
              <div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: #666600; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                <div>
                  <span style="font-size: 12px">
                                        1. 积分抵扣商品 || 积分兑换机会
                  </span>
                </div>
                <div>
                  <span style="font-size: 12px">
                                        2. 扣积分 + 发商品事件创建 == 分布式事务完成
                  </span>
                </div>
                <div>
                  <span style="font-size: 12px">
                                        - 事件异步发送到 MQ
                  </span>
                </div>
                <div>
                  <span style="font-size: 12px">
                                        3. 商品系统消费MQ的消息
                  </span>
                </div>
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="462" y="804" fill="#666600" font-family="Helvetica" font-size="14px">
                    1. 积分抵扣商品 || 积分兑换机会...
        </text>
      </switch>
    </g>
  </g>
  <switch>
    <g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/>
    <a transform="translate(0,-5)" xlink:href="https://www.diagrams.net/doc/faq/svg-export-text-problems" target="_blank">
      <text text-anchor="middle" font-size="10px" x="50%" y="100%">
                Viewer does not support full SVG 1.1
      </text>
    </a>
  </switch>
</svg>
