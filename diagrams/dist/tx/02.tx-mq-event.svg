<svg host="65bd71144e"
  xmlns="http://www.w3.org/2000/svg"
  xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="2271px" height="891px" viewBox="-0.5 -0.5 2271 891" content="&lt;mxfile&gt;&lt;diagram id=&quot;Xpbpm1wv82t_yM4CTfCD&quot; name=&quot;Page-1&quot;&gt;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&lt;/diagram&gt;&lt;/mxfile&gt;">
  <defs/>
  <g>
    <rect x="439" y="200" width="330" height="350" rx="9.9" ry="9.9" fill="#d5e8d4" stroke="#82b366" pointer-events="none"/>
    <path d="M 579 480 L 742 480 L 749 487 L 749 501 L 579 501 L 579 480 Z" fill="#fff2cc" stroke="#d6b656" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 742 480 L 742 487 L 749 487" fill="none" stroke="#d6b656" stroke-miterlimit="10" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 168px; height: 1px; padding-top: 491px; margin-left: 580px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: #666600; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                <div>
                  <span style="font-size: 10px ; color: rgb(255 , 0 , 128)">
                                        事件表+异步消费事件+job fallback
                  </span>
                </div>
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="664" y="495" fill="#666600" font-family="Helvetica" font-size="14px" text-anchor="middle">
                    事件表+异步消费事件+job fallback
        </text>
      </switch>
    </g>
    <rect x="679" y="395" width="90" height="40" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 88px; height: 1px; padding-top: 415px; margin-left: 680px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                                插入事件表
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="724" y="419" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    插入事件表
        </text>
      </switch>
    </g>
    <path d="M 545 415 L 672.63 415" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 677.88 415 L 670.88 418.5 L 672.63 415 L 670.88 411.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 415px; margin-left: 607px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">
                                3-2状态为已接收
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="607" y="419" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">
                    3-2状态为已接收
        </text>
      </switch>
    </g>
    <rect x="465" y="395" width="80" height="40" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 78px; height: 1px; padding-top: 415px; margin-left: 466px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                                监听消费
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="505" y="419" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    监听消费
        </text>
      </switch>
    </g>
    <path d="M 699 263.5 C 683 263.5 679 276 691.8 278.5 C 679 284 693.4 296 703.8 291 C 711 301 735 301 743 291 C 759 291 759 281 749 276 C 759 266 743 256 729 261 C 719 253.5 703 253.5 699 263.5 Z" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 78px; height: 1px; padding-top: 276px; margin-left: 680px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                                分布式
                <br/>
                                定时任务
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="719" y="280" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    分布式
 定时任务
        </text>
      </switch>
    </g>
    <path d="M 724 395 Q 724 348 723.5 348 Q 723 348 723 304.87" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 723 299.62 L 726.5 306.62 L 723 304.87 L 719.5 306.62 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 353px; margin-left: 723px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">
                                4-1 读取已接收
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="723" y="356" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">
                    4-1 读取已接收
        </text>
      </switch>
    </g>
    <path d="M 505 301 Q 505 348 614.5 348 Q 724 348 724 388.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 724 393.88 L 720.5 386.88 L 724 388.63 L 727.5 386.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 349px; margin-left: 585px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">
                                4-3 改状态为已处理
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="585" y="353" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">
                    4-3 改状态为已处理
        </text>
      </switch>
    </g>
    <rect x="460" y="261" width="90" height="40" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 88px; height: 1px; padding-top: 281px; margin-left: 461px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                                更新订单
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="505" y="285" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    更新订单
        </text>
      </switch>
    </g>
    <path d="M 679 276 Q 614.5 276 614.5 278.5 Q 614.5 281 556.37 281" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 551.12 281 L 558.12 277.5 L 556.37 281 L 558.12 284.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 277px; margin-left: 615px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">
                                4-2 执行本地业务
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="615" y="280" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">
                    4-2 执行本地业务
        </text>
      </switch>
    </g>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 220px; margin-left: 719px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: nowrap; ">
                <font color="#ff0080">
                                    订单系统
                </font>
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="719" y="224" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    订单系统
        </text>
      </switch>
    </g>
    <rect x="50" y="200" width="330" height="350" rx="9.9" ry="9.9" fill="#dae8fc" stroke="#6c8ebf" pointer-events="none"/>
    <rect x="90" y="250" width="120" height="40" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 270px; margin-left: 91px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                                1-1 更新支付流水表
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="150" y="274" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    1-1 更新支付流水表
        </text>
      </switch>
    </g>
    <rect x="250" y="350" width="120" height="40" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 370px; margin-left: 251px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                                1-2 插入事件表
                <br/>
                                type-relativeid-status
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="310" y="374" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    1-2 插入事件表...
        </text>
      </switch>
    </g>
    <path d="M 210 270 L 300 270 Q 310 270 310 280 L 310 343.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 310 348.88 L 306.5 341.88 L 310 343.63 L 313.5 341.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 102 395 L 101 395 Q 100 395 100 385 L 100 377.5 Q 100 370 110 370 L 243.63 370" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 248.88 370 L 241.88 373.5 L 243.63 370 L 241.88 366.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 370px; margin-left: 126px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">
                                2-1查询new状态的时间发布
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="126" y="374" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">
                    2-1查询new状态的时间发布
        </text>
      </switch>
    </g>
    <path d="M 90 402.5 C 74 402.5 70 415 82.8 417.5 C 70 423 84.4 435 94.8 430 C 102 440 126 440 134 430 C 150 430 150 420 140 415 C 150 405 134 395 120 400 C 110 392.5 94 392.5 90 402.5 Z" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 78px; height: 1px; padding-top: 415px; margin-left: 71px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                                分布式
                <br/>
                                定时任务
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="110" y="419" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    分布式
 定时任务
        </text>
      </switch>
    </g>
    <path d="M 120 470 L 283 470 L 290 477 L 290 540 L 120 540 L 120 470 Z" fill="#fff2cc" stroke="#d6b656" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 283 470 L 283 477 L 290 477" fill="none" stroke="#d6b656" stroke-miterlimit="10" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 168px; height: 1px; padding-top: 505px; margin-left: 122px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: left; ">
              <div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: #666600; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                <font style="font-size: 10px">
                                    1. 可没有事件表+同步去MQ: 回滚
                  <br/>
                                    2. 1-2 直接结束, 就会导致消费的延迟
                  <br/>
                                    3.
                  <font color="#ff0080" style="font-size: 10px">
                                        事件表+异步MQ+job fallback
                    <br/>
                  </font>
                                    - 出问题要看两份log: job+async
                  <br/>
                </font>
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="122" y="509" fill="#666600" font-family="Helvetica" font-size="14px">
                    1. 可没有事件表+同步去MQ: 回滚...
        </text>
      </switch>
    </g>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 220px; margin-left: 340px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: nowrap; ">
                <font color="#ff0080">
                                    支付系统
                </font>
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="340" y="224" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    支付系统
        </text>
      </switch>
    </g>
    <rect x="170" y="5" width="520" height="60" rx="9" ry="9" fill="#ffe6cc" stroke="#d79b00" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 518px; height: 1px; padding-top: 35px; margin-left: 171px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                                分布式事务解决方案-MQ+Event:
                <font color="#ff0080">
                                    不适合数据量特别大的情况
                </font>
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="430" y="39" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    分布式事务解决方案-MQ+Event: 不适合数据量特别大的情况
        </text>
      </switch>
    </g>
    <path d="M 65 70 L 65 106.48" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 65 111.73 L 61.5 104.73 L 65 106.48 L 68.5 104.73 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 0 0 L 119 0 L 130 11 L 130 70 L 0 70 L 0 0 Z" fill="#fff2cc" stroke="#d6b656" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 119 0 L 119 11 L 130 11" fill="none" stroke="#d6b656" stroke-miterlimit="10" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 128px; height: 1px; padding-top: 35px; margin-left: 1px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: #666600; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                <font style="font-size: 12px">
                                    支付接口回调系统:
                  <br/>
                                    1. 更新流水
                  <br/>
                                    2. 更新订单
                </font>
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="65" y="39" fill="#666600" font-family="Helvetica" font-size="14px" text-anchor="middle">
                    支付接口回调系统:...
        </text>
      </switch>
    </g>
    <path d="M 65 160 L 65 260 Q 65 270 74.32 270 L 83.63 270" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 88.88 270 L 81.88 273.5 L 83.63 270 L 81.88 266.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 45 122.5 C 29 122.5 25 135 37.8 137.5 C 25 143 39.4 155 49.8 150 C 57 160 81 160 89 150 C 105 150 105 140 95 135 C 105 125 89 115 75 120 C 65 112.5 49 112.5 45 122.5 Z" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 78px; height: 1px; padding-top: 135px; margin-left: 26px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                                数据入库
                <br/>
                                job 更新
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="65" y="139" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    数据入库
job 更新
        </text>
      </switch>
    </g>
    <rect x="340" y="650" width="110" height="40" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 108px; height: 1px; padding-top: 670px; margin-left: 341px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                                MQ{死信}
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="395" y="674" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    MQ{死信}
        </text>
      </switch>
    </g>
    <path d="M 10 740 L 309 740 L 320 751 L 320 890 L 10 890 L 10 740 Z" fill="#fff2cc" stroke="#d6b656" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 309 740 L 309 751 L 320 751" fill="none" stroke="#d6b656" stroke-miterlimit="10" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 308px; height: 1px; padding-top: 815px; margin-left: 11px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: #666600; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                <div style="text-align: left">
                  <span style="font-size: 12px">
                                        1. 每个数字开头都是一个原子操作
                  </span>
                </div>
                <div style="text-align: left">
                  <span style="font-size: 12px">
                                        2. 2-x 向MQ中发布消息可能出现不是原子op
                  </span>
                </div>
                <div style="text-align: left">
                  <span style="font-size: 12px">
                                        - 发送到MQ中但是超时了, 事务回滚{消息无法回滚}
                  </span>
                </div>
                <div style="text-align: left">
                  <span style="font-size: 12px">
                                        - 数据量大可以迁移到历史表中
                  </span>
                </div>
                <span style="font-size: 12px">
                  <div style="text-align: left">
                    <span>
                                            3. 事件表的作用: 可以看出有多少没处理的， 系统压力
                    </span>
                  </div>
                  <div style="text-align: left">
                    <span>
                                            4. 3-x 的消费需要保证幂等: 事件ID
                    </span>
                  </div>
                  <div style="text-align: left">
                    <span>
                                            - ack 有可能在mq中成功但是返回超时
                    </span>
                  </div>
                  <div style="text-align: left">
                    <span>
                                            5. 消息发送发必须保证至少成功发送一次
                    </span>
                  </div>
                </span>
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="165" y="819" fill="#666600" font-family="Helvetica" font-size="14px" text-anchor="middle">
                    1. 每个数字开头都是一个原子操作...
        </text>
      </switch>
    </g>
    <path d="M 525 435 L 525 660 Q 525 670 515 670 L 456.37 670" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 451.12 670 L 458.12 666.5 L 456.37 670 L 458.12 673.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 506px; margin-left: 526px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">
                                3-3 ack
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="526" y="509" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">
                    3-3 ack
        </text>
      </switch>
    </g>
    <path d="M 395 650 Q 395 542.5 450 542.5 Q 505 542.5 505 441.37" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 505 436.12 L 508.5 443.12 L 505 441.37 L 501.5 443.12 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 530px; margin-left: 481px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">
                                3-1 监听消费
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="481" y="533" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">
                    3-1 监听消费
        </text>
      </switch>
    </g>
    <path d="M 395 650 Q 395 520 352.5 520 Q 310 520 310 396.37" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 310 391.12 L 313.5 398.12 L 310 396.37 L 306.5 398.12 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 518px; margin-left: 351px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">
                                2-2修改状态为已发送
                <br/>
                                rmq 在callback 中修改
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="351" y="522" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">
                    2-2修改状态为已发送...
        </text>
      </switch>
    </g>
    <path d="M 108.32 440.35 L 108.33 660 Q 108.33 670 118.33 670 L 333.63 670" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 338.88 670 L 331.88 673.5 L 333.63 670 L 331.88 666.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 670px; margin-left: 190px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">
                                2-3发送给MQ
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="190" y="674" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">
                    2-3发送给MQ
        </text>
      </switch>
    </g>
    <path d="M 460 740 L 749 740 L 760 751 L 760 860 L 460 860 L 460 740 Z" fill="#fff2cc" stroke="#d6b656" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 749 740 L 749 751 L 760 751" fill="none" stroke="#d6b656" stroke-miterlimit="10" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 298px; height: 1px; padding-top: 800px; margin-left: 462px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: left; ">
              <div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: #666600; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                <div>
                  <span style="font-size: 12px">
                                        1. 积分抵扣商品 || 积分兑换机会
                  </span>
                </div>
                <div>
                  <span style="font-size: 12px">
                                        2. 扣积分 + 发商品事件创建 == 分布式事务完成
                  </span>
                </div>
                <div>
                  <span style="font-size: 12px">
                                        - 事件异步发送到 MQ
                  </span>
                </div>
                <div>
                  <span style="font-size: 12px">
                                        3. 商品系统消费MQ的消息
                  </span>
                </div>
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="462" y="804" fill="#666600" font-family="Helvetica" font-size="14px">
                    1. 积分抵扣商品 || 积分兑换机会...
        </text>
      </switch>
    </g>
    <path d="M 800.55 390.16 L 800.45 360.16 L 896.46 359.84 L 896.43 349.34 L 949.5 374.66 L 896.6 400.34 L 896.56 389.84 Z" fill="none" stroke="#000000" stroke-linejoin="round" stroke-miterlimit="10" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 376px; margin-left: 870px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">
                                升级为可靠消息服务
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="870" y="380" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">
                    升级为可靠消息服务
        </text>
      </switch>
    </g>
    <rect x="1237.5" y="0" width="520" height="60" rx="9" ry="9" fill="#ffe6cc" stroke="#d79b00" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 518px; height: 1px; padding-top: 30px; margin-left: 1239px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                                分布式事务解决方案-可靠消息服务:
                <br/>
                                发送端最少发送一次 + 消费端最多消费一次
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="1498" y="34" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    分布式事务解决方案-可靠消息服务:...
        </text>
      </switch>
    </g>
    <rect x="1080" y="110" width="760" height="460" rx="18.4" ry="18.4" fill="#dae8fc" stroke="#6c8ebf" pointer-events="none"/>
    <rect x="1110" y="250" width="70" height="30" rx="4.5" ry="4.5" fill="#ffffff" stroke="#000000" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 68px; height: 1px; padding-top: 265px; margin-left: 1111px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                                支付服务
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="1145" y="269" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    支付服务
        </text>
      </switch>
    </g>
    <path d="M 1390 250 L 1390 200 Q 1390 190 1380 190 L 1137.5 190 Q 1127.5 190 1127.5 200 L 1127.5 243.63" fill="none" stroke="#000099" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 1127.5 248.88 L 1124 241.88 L 1127.5 243.63 L 1131 241.88 Z" fill="#000099" stroke="#000099" stroke-miterlimit="10" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 191px; margin-left: 1253px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000099; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">
                                3-1 回查长时间状态为待确认的消息状态
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="1253" y="195" fill="#000099" font-family="Helvetica" font-size="11px" text-anchor="middle">
                    3-1 回查长时间状态为待确认的消息状态
        </text>
      </switch>
    </g>
    <rect x="1350" y="250" width="80" height="30" rx="4.5" ry="4.5" fill="#fff2cc" stroke="#d6b656" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 78px; height: 1px; padding-top: 265px; margin-left: 1351px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                                可靠消息服务
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="1390" y="269" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    可靠消息服务
        </text>
      </switch>
    </g>
    <path d="M 1180 265 L 1343.63 265" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 1348.88 265 L 1341.88 268.5 L 1343.63 265 L 1341.88 261.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 264px; margin-left: 1255px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #FF9999; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">
                                1-1 http 发送待确认消息
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="1255" y="268" fill="#FF9999" font-family="Helvetica" font-size="11px" text-anchor="middle">
                    1-1 http 发送待确认消息
        </text>
      </switch>
    </g>
    <path d="M 1162.5 250 L 1162.5 240 Q 1162.5 230 1172.5 230 L 1360 230 Q 1370 230 1370 236.82 L 1370 243.63" fill="none" stroke="#000099" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 1370 248.88 L 1366.5 241.88 L 1370 243.63 L 1373.5 241.88 Z" fill="#000099" stroke="#000099" stroke-miterlimit="10" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 230px; margin-left: 1255px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000099; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">
                                3-2 返回消息状态
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="1255" y="234" fill="#000099" font-family="Helvetica" font-size="11px" text-anchor="middle">
                    3-2 返回消息状态
        </text>
      </switch>
    </g>
    <rect x="1700" y="250" width="70" height="30" rx="4.5" ry="4.5" fill="#ffffff" stroke="#000000" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 68px; height: 1px; padding-top: 265px; margin-left: 1701px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                                订单服务
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="1735" y="269" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    订单服务
        </text>
      </switch>
    </g>
    <path d="M 1167.5 357.5 L 1360 357.5 Q 1370 357.5 1370 347.5 L 1370 286.37" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 1370 281.12 L 1373.5 288.12 L 1370 286.37 L 1366.5 288.12 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 358px; margin-left: 1276px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #FF66FF; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">
                                1-3 成功:待发送; 失败:已取消
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="1276" y="361" fill="#FF66FF" font-family="Helvetica" font-size="11px" text-anchor="middle">
                    1-3 成功:待发送; 失败:已取消
        </text>
      </switch>
    </g>
    <path d="M 1122.5 344 C 1122.5 332 1167.5 332 1167.5 344 L 1167.5 371 C 1167.5 383 1122.5 383 1122.5 371 Z" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 1122.5 344 C 1122.5 353 1167.5 353 1167.5 344" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 43px; height: 1px; padding-top: 364px; margin-left: 1124px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                                DB
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="1145" y="368" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    DB
        </text>
      </switch>
    </g>
    <path d="M 1145 280 L 1145 328.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 1145 333.88 L 1141.5 326.88 L 1145 328.63 L 1148.5 326.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 303px; margin-left: 1145px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">
                                1-2 db op, 执行业务
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="1145" y="306" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">
                    1-2 db op, 执行业务
        </text>
      </switch>
    </g>
    <path d="M 1367.5 429 C 1367.5 417 1412.5 417 1412.5 429 L 1412.5 456 C 1412.5 468 1367.5 468 1367.5 456 Z" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 1367.5 429 C 1367.5 438 1412.5 438 1412.5 429" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 43px; height: 1px; padding-top: 449px; margin-left: 1369px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                                消息DB
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="1390" y="453" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    消息DB
        </text>
      </switch>
    </g>
    <path d="M 1390 280 L 1390 413.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 1390 418.88 L 1386.5 411.88 L 1390 413.63 L 1393.5 411.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 324px; margin-left: 1391px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #FF9999; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">
                                1-1-1 创建待确认消息
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="1391" y="327" fill="#FF9999" font-family="Helvetica" font-size="11px" text-anchor="middle">
                    1-1-1 创建待确认消息
        </text>
      </switch>
    </g>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 381px; margin-left: 1391px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #FF66FF; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">
                                1-3-1将消息更改为待发送或已取消
                <br/>
                                并异步触发2-1
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="1391" y="384" fill="#FF66FF" font-family="Helvetica" font-size="11px" text-anchor="middle">
                    1-3-1将消息更改为待发送或已取消...
        </text>
      </switch>
    </g>
    <path d="M 1297.5 410 L 1351 410 L 1360 419 L 1360 490 L 1297.5 490 L 1297.5 410 Z" fill="#fff2cc" stroke="#d6b656" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 1351 410 L 1351 419 L 1360 419" fill="none" stroke="#d6b656" stroke-miterlimit="10" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 61px; height: 1px; padding-top: 450px; margin-left: 1299px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: #666600; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                <div style="text-align: left">
                  <font style="font-size: 10px">
                                        1. 带确认
                  </font>
                  <br/>
                </div>
                <div style="text-align: left">
                  <font style="font-size: 10px">
                                        2. 待发送
                  </font>
                </div>
                <div style="text-align: left">
                  <font style="font-size: 10px">
                                        3. 已发送
                  </font>
                </div>
                <div style="text-align: left">
                  <font style="font-size: 10px">
                                        4. 已完成
                  </font>
                </div>
                <div style="text-align: left">
                  <font style="font-size: 10px">
                                        5. 取消
                  </font>
                </div>
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="1329" y="454" fill="#666600" font-family="Helvetica" font-size="14px" text-anchor="middle">
                    1. 带确认...
        </text>
      </switch>
    </g>
    <path d="M 1560 280 L 1560 432.5 Q 1560 442.5 1550 442.5 L 1418.87 442.5" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 1413.62 442.5 L 1420.62 439 L 1418.87 442.5 L 1420.62 446 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 359px; margin-left: 1560px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #66FFB3; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">
                <font color="#000000">
                                    2-2 成功callback中状态改为已发送
                </font>
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="1560" y="362" fill="#66FFB3" font-family="Helvetica" font-size="11px" text-anchor="middle">
                    2-2 成功callback中状态改为已发送
        </text>
      </switch>
    </g>
    <path d="M 1590 265 L 1693.63 265" fill="none" stroke="#999900" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 1698.88 265 L 1691.88 268.5 L 1693.63 265 L 1691.88 261.5 Z" fill="#999900" stroke="#999900" stroke-miterlimit="10" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 265px; margin-left: 1641px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #999900; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">
                                4-1 消费消息
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="1641" y="269" fill="#999900" font-family="Helvetica" font-size="11px" text-anchor="middle">
                    4-1 消费消息
        </text>
      </switch>
    </g>
    <rect x="1530" y="250" width="60" height="30" rx="4.5" ry="4.5" fill="#fff2cc" stroke="#d6b656" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 58px; height: 1px; padding-top: 265px; margin-left: 1531px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                                MQ
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="1560" y="269" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    MQ
        </text>
      </switch>
    </g>
    <path d="M 1430 265 L 1523.63 265" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 1528.88 265 L 1521.88 268.5 L 1523.63 265 L 1521.88 261.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 265px; margin-left: 1481px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #66FFB3; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">
                <font color="#000000">
                                    2-1 发送到mq
                </font>
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="1481" y="269" fill="#66FFB3" font-family="Helvetica" font-size="11px" text-anchor="middle">
                    2-1 发送到mq
        </text>
      </switch>
    </g>
    <path d="M 1370 512.5 C 1354 512.5 1350 525 1362.8 527.5 C 1350 533 1364.4 545 1374.8 540 C 1382 550 1406 550 1414 540 C 1430 540 1430 530 1420 525 C 1430 515 1414 505 1400 510 C 1390 502.5 1374 502.5 1370 512.5 Z" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 78px; height: 1px; padding-top: 525px; margin-left: 1351px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                <font style="font-size: 8px">
                                    分布式定时任务
                  <br/>
                                    发送消息到MQ
                  <br/>
                </font>
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="1390" y="529" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    分布式定时任务发送消息到MQ...
        </text>
      </switch>
    </g>
    <path d="M 1390 465 L 1390 475 Q 1390 485 1390 482.5 L 1390 481.25 Q 1390 480 1390 486.82 L 1390 493.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 1390 498.88 L 1386.5 491.88 L 1390 493.63 L 1393.5 491.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 1190 130 L 1351 130 L 1360 139 L 1360 180 L 1190 180 L 1190 130 Z" fill="#fff2cc" stroke="#d6b656" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 1351 130 L 1351 139 L 1360 139" fill="none" stroke="#d6b656" stroke-miterlimit="10" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 168px; height: 1px; padding-top: 155px; margin-left: 1191px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: #666600; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                <div style="text-align: left">
                  <span style="font-size: 10px">
                                        1. 第一步中存在两个http 可以优化掉
                  </span>
                </div>
                <div style="text-align: left">
                  <span style="font-size: 10px">
                                        2. 在支付中加入消息的回查接口
                  </span>
                </div>
                <div style="text-align: left">
                  <span style="font-size: 10px">
                                        3. 此时则只需要保证1-2的事务
                  </span>
                </div>
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="1275" y="159" fill="#666600" font-family="Helvetica" font-size="14px" text-anchor="middle">
                    1. 第一步中存在两个http 可以优化掉...
        </text>
      </switch>
    </g>
    <path d="M 1712.5 375 L 1570 375 Q 1560 375 1560 365 L 1560 286.37" fill="none" stroke="#999900" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 1560 281.12 L 1563.5 288.12 L 1560 286.37 L 1556.5 288.12 Z" fill="#999900" stroke="#999900" stroke-miterlimit="10" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 375px; margin-left: 1642px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #999900; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">
                                4-3 ack
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="1642" y="379" fill="#999900" font-family="Helvetica" font-size="11px" text-anchor="middle">
                    4-3 ack
        </text>
      </switch>
    </g>
    <path d="M 1757.5 375 L 1780 375 Q 1790 375 1790 365 L 1790 220 Q 1790 210 1780 210 L 1420 210 Q 1410 210 1410 220 L 1410 243.63" fill="none" stroke="#999900" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 1410 248.88 L 1406.5 241.88 L 1410 243.63 L 1413.5 241.88 Z" fill="#999900" stroke="#999900" stroke-miterlimit="10" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 210px; margin-left: 1638px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #999900; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">
                                4-4 http修改消息为已完成
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="1638" y="214" fill="#999900" font-family="Helvetica" font-size="11px" text-anchor="middle">
                    4-4 http修改消息为已完成
        </text>
      </switch>
    </g>
    <path d="M 1712.5 361.5 C 1712.5 349.5 1757.5 349.5 1757.5 361.5 L 1757.5 388.5 C 1757.5 400.5 1712.5 400.5 1712.5 388.5 Z" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 1712.5 361.5 C 1712.5 370.5 1757.5 370.5 1757.5 361.5" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 43px; height: 1px; padding-top: 382px; margin-left: 1714px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                                消息DB
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="1735" y="385" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    消息DB
        </text>
      </switch>
    </g>
    <path d="M 1735 280 L 1735 346.13" fill="none" stroke="#999900" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 1735 351.38 L 1731.5 344.38 L 1735 346.13 L 1738.5 344.38 Z" fill="#999900" stroke="#999900" stroke-miterlimit="10" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 313px; margin-left: 1734px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #999900; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">
                                4-2 执行业务逻辑
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="1734" y="316" fill="#999900" font-family="Helvetica" font-size="11px" text-anchor="middle">
                    4-2 执行业务逻辑
        </text>
      </switch>
    </g>
    <path d="M 1530 397.5 L 1801 397.5 L 1810 406.5 L 1810 517.5 L 1530 517.5 L 1530 397.5 Z" fill="#fff2cc" stroke="#d6b656" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 1801 397.5 L 1801 406.5 L 1810 406.5" fill="none" stroke="#d6b656" stroke-miterlimit="10" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 278px; height: 1px; padding-top: 458px; margin-left: 1531px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: #666600; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                <div style="text-align: left">
                  <span style="font-size: 10px">
                                        1. 4-3 &amp; 4-4 做不到原子的
                  </span>
                </div>
                <div style="text-align: left">
                  <span style="font-size: 10px">
                                        2. 可以这一步执行 4-4 + 长时间未已发送的调用回查接口
                  </span>
                </div>
                <div style="text-align: left">
                  <span style="font-size: 10px">
                                        3. 这里直接面上MQ为了快
                  </span>
                </div>
                <div style="text-align: left">
                  <span style="font-size: 10px">
                                        - 这里也可以面向可靠服务进行: 靠可靠服务进行消费回调
                  </span>
                </div>
                <div style="text-align: left">
                  <span style="font-size: 10px">
                                        4. 4-4 可以在某些时候移到4-3前面
                  </span>
                </div>
                <div style="text-align: left">
                  <span style="font-size: 10px">
                                        - 但是这是不好的, 消息没消费却通知了一消费不太合适
                  </span>
                </div>
                <div style="text-align: left">
                  <span style="font-size: 10px">
                                        - 消费了但是通知没消费, 延迟通知可以接受
                  </span>
                </div>
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="1670" y="462" fill="#666600" font-family="Helvetica" font-size="14px" text-anchor="middle">
                    1. 4-3 &amp; 4-4 做不到原子的...
        </text>
      </switch>
    </g>
    <path d="M 1310 750 L 1539 750 L 1550 761 L 1550 850 L 1310 850 L 1310 750 Z" fill="#fff2cc" stroke="#d6b656" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 1539 750 L 1539 761 L 1550 761" fill="none" stroke="#d6b656" stroke-miterlimit="10" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 238px; height: 1px; padding-top: 800px; margin-left: 1311px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: #666600; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                <div>
                  <span style="font-size: 12px">
                                        最大努力通知
                  </span>
                </div>
                <div style="text-align: left">
                  <span style="font-size: 12px">
                                        1. 被调用方
                  </span>
                </div>
                <div style="text-align: left">
                  <span style="font-size: 12px">
                                        2. 多次通知调用方: 支付宝25小时8次
                  </span>
                </div>
                <div style="text-align: left">
                  <span style="font-size: 12px">
                                        3. 没有通知到, 可以提供接口以供查询
                  </span>
                </div>
                <div style="text-align: left">
                  <span style="font-size: 12px">
                    <br/>
                  </span>
                </div>
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="1430" y="804" fill="#666600" font-family="Helvetica" font-size="14px" text-anchor="middle">
                    最大努力通知1. 被调用方...
        </text>
      </switch>
    </g>
    <path d="M 1910.55 335.5 L 1910.45 305.5 L 2006.46 305.18 L 2006.43 294.68 L 2059.5 320 L 2006.6 345.68 L 2006.56 335.18 Z" fill="none" stroke="#000000" stroke-linejoin="round" stroke-miterlimit="10" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 322px; margin-left: 1980px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">
                                升级为事务消息
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="1980" y="325" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">
                    升级为事务消息
        </text>
      </switch>
    </g>
    <path d="M 2105 290 L 2259 290 L 2270 301 L 2270 350 L 2105 350 L 2105 290 Z" fill="#fff2cc" stroke="#d6b656" stroke-miterlimit="10" pointer-events="none"/>
    <path d="M 2259 290 L 2259 301 L 2270 301" fill="none" stroke="#d6b656" stroke-miterlimit="10" pointer-events="none"/>
    <g transform="translate(-0.5 -0.5)">
      <switch>
        <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 163px; height: 1px; padding-top: 320px; margin-left: 2106px;">
            <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
              <div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: #666600; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">
                <div>
                  <span style="font-size: 12px">
                                        06.tx-msg-mq.svg
                  </span>
                </div>
              </div>
            </div>
          </div>
        </foreignObject>
        <text x="2188" y="324" fill="#666600" font-family="Helvetica" font-size="14px" text-anchor="middle">
                    06.tx-msg-mq.svg
        </text>
      </switch>
    </g>
  </g>
  <switch>
    <g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/>
    <a transform="translate(0,-5)" xlink:href="https://www.diagrams.net/doc/faq/svg-export-text-problems" target="_blank">
      <text text-anchor="middle" font-size="10px" x="50%" y="100%">
                Viewer does not support full SVG 1.1
      </text>
    </a>
  </switch>
</svg>
